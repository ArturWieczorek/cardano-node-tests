<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>cardano_node_tests.tests.tests_plutus package &mdash; cardano-node-tests  documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/copyright.css" type="text/css" />
    <link rel="shortcut icon" href="https://user-images.githubusercontent.com/2352619/223086153-522289f3-9902-4f63-ad7b-a7d9c5789db0.png"/>
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="cardano_node_tests.tests.tests_plutus_v2 package" href="cardano_node_tests.tests.tests_plutus_v2.html" />
    <link rel="prev" title="cardano_node_tests.tests package" href="cardano_node_tests.tests.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            cardano-node-tests
              <img src="_static/Cardano-Crypto-Logo-128.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="readme.html">README for cardano-node-tests</a><ul>
<li class="toctree-l2"><a class="reference internal" href="readme.html#running-tests-using-github-actions">Running tests using Github Actions</a></li>
<li class="toctree-l2"><a class="reference internal" href="readme.html#running-tests-using-nix">Running tests using Nix</a></li>
<li class="toctree-l2"><a class="reference internal" href="readme.html#variables-for-configuring-testrun">Variables for configuring testrun</a></li>
<li class="toctree-l2"><a class="reference internal" href="readme.html#local-installation-e-g-for-tests-development">Local installation (e.g. for tests development)</a></li>
<li class="toctree-l2"><a class="reference internal" href="readme.html#local-usage">Local usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="readme.html#tests-development">Tests development</a></li>
<li class="toctree-l2"><a class="reference internal" href="readme.html#test-coverage-of-cardano-cli-commands">Test coverage of Cardano CLI commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="readme.html#building-documentation">Building documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="readme.html#contributing">Contributing</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="test_results.html">Test Results</a><ul>
<li class="toctree-l2"><a class="reference internal" href="test_results/nightly_system_tests.html">Nightly system tests pipelines</a><ul>
<li class="toctree-l3"><a class="reference internal" href="test_results/nightly_system_tests.html#test-statuses">Test statuses</a></li>
<li class="toctree-l3"><a class="reference internal" href="test_results/nightly_system_tests.html#nightly-results">Nightly results</a><ul>
<li class="toctree-l4"><a class="reference internal" href="test_results/nightly_system_tests.html#nightly-upgrade-testing">Nightly upgrade testing</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="test_results/sync_tests.html">Sync tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="test_results/tag_tests.html">Tag Testing</a><ul>
<li class="toctree-l3"><a class="reference internal" href="test_results/node/tag_1_35_7.html">1.35.7</a><ul>
<li class="toctree-l4"><a class="reference internal" href="test_results/node/tag_1_35_7.html#changelogs">Changelogs</a></li>
<li class="toctree-l4"><a class="reference internal" href="test_results/node/tag_1_35_7.html#regression-testing-on-a-local-cluster">Regression testing on a local cluster</a></li>
<li class="toctree-l4"><a class="reference internal" href="test_results/node/tag_1_35_7.html#release-testing-checklist">Release testing checklist</a></li>
<li class="toctree-l4"><a class="reference internal" href="test_results/node/tag_1_35_7.html#new-functionalities-in-this-tag">New functionalities in this tag</a></li>
<li class="toctree-l4"><a class="reference internal" href="test_results/node/tag_1_35_7.html#new-issues">New issues</a></li>
<li class="toctree-l4"><a class="reference internal" href="test_results/node/tag_1_35_7.html#breaking-changes">Breaking changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="test_results/node/tag_1_35_7.html#component-level-test-tracking">Component Level Test Tracking</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="test_results/node/tag_1_35_6.html">1.35.6</a><ul>
<li class="toctree-l4"><a class="reference internal" href="test_results/node/tag_1_35_6.html#changelogs">Changelogs</a></li>
<li class="toctree-l4"><a class="reference internal" href="test_results/node/tag_1_35_6.html#regression-testing-on-a-local-cluster">Regression testing on a local cluster</a></li>
<li class="toctree-l4"><a class="reference internal" href="test_results/node/tag_1_35_6.html#release-testing-checklist">Release testing checklist</a></li>
<li class="toctree-l4"><a class="reference internal" href="test_results/node/tag_1_35_6.html#new-functionalities-in-this-tag">New functionalities in this tag</a></li>
<li class="toctree-l4"><a class="reference internal" href="test_results/node/tag_1_35_6.html#new-issues">New issues</a></li>
<li class="toctree-l4"><a class="reference internal" href="test_results/node/tag_1_35_6.html#breaking-changes">Breaking changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="test_results/node/tag_1_35_6.html#component-level-test-tracking">Component Level Test Tracking</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="test_results/node/tag_1_35_5.html">1.35.5</a><ul>
<li class="toctree-l4"><a class="reference internal" href="test_results/node/tag_1_35_5.html#changelogs">Changelogs</a></li>
<li class="toctree-l4"><a class="reference internal" href="test_results/node/tag_1_35_5.html#regression-testing-on-a-local-cluster">Regression testing on a local cluster</a></li>
<li class="toctree-l4"><a class="reference internal" href="test_results/node/tag_1_35_5.html#release-testing-checklist">Release testing checklist</a></li>
<li class="toctree-l4"><a class="reference internal" href="test_results/node/tag_1_35_5.html#new-functionalities-in-this-tag">New functionalities in this tag</a></li>
<li class="toctree-l4"><a class="reference internal" href="test_results/node/tag_1_35_5.html#new-issues">New issues</a></li>
<li class="toctree-l4"><a class="reference internal" href="test_results/node/tag_1_35_5.html#breaking-changes">Breaking changes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="test_results/node/tag_1_35_4_rc1.html">1.35.4-rc1</a><ul>
<li class="toctree-l4"><a class="reference internal" href="test_results/node/tag_1_35_4_rc1.html#changelogs">Changelogs</a></li>
<li class="toctree-l4"><a class="reference internal" href="test_results/node/tag_1_35_4_rc1.html#regression-testing-on-a-local-cluster">Regression testing on a local cluster</a></li>
<li class="toctree-l4"><a class="reference internal" href="test_results/node/tag_1_35_4_rc1.html#release-testing-checklist">Release testing checklist</a></li>
<li class="toctree-l4"><a class="reference internal" href="test_results/node/tag_1_35_4_rc1.html#new-functionalities-in-this-tag">New functionalities in this tag</a></li>
<li class="toctree-l4"><a class="reference internal" href="test_results/node/tag_1_35_4_rc1.html#secp256k1-iog-test-tracking">SECP256k1 IOG Test Tracking</a></li>
<li class="toctree-l4"><a class="reference internal" href="test_results/node/tag_1_35_4_rc1.html#new-issues">New issues</a></li>
<li class="toctree-l4"><a class="reference internal" href="test_results/node/tag_1_35_4_rc1.html#breaking-changes">Breaking changes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="test_results/node/tag_1_35_3.html">1.35.3</a><ul>
<li class="toctree-l4"><a class="reference internal" href="test_results/node/tag_1_35_3.html#changelogs">Changelogs</a></li>
<li class="toctree-l4"><a class="reference internal" href="test_results/node/tag_1_35_3.html#regression-testing-on-a-local-cluster">Regression testing on a local cluster</a></li>
<li class="toctree-l4"><a class="reference internal" href="test_results/node/tag_1_35_3.html#release-testing-checklist">Release testing checklist</a></li>
<li class="toctree-l4"><a class="reference internal" href="test_results/node/tag_1_35_3.html#new-functionalities-in-this-tag">New functionalities in this tag</a></li>
<li class="toctree-l4"><a class="reference internal" href="test_results/node/tag_1_35_3.html#new-issues">New issues</a></li>
<li class="toctree-l4"><a class="reference internal" href="test_results/node/tag_1_35_3.html#breaking-changes">Breaking changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="test_results/node/tag_1_35_3.html#relevant-existing-issues">Relevant existing issues</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="process.html">Process</a><ul>
<li class="toctree-l2"><a class="reference internal" href="process/100_test_types.html">Types and levels of tests</a><ul>
<li class="toctree-l3"><a class="reference internal" href="process/100_test_types.html#node-system-tests">Node system tests</a><ul>
<li class="toctree-l4"><a class="reference internal" href="process/100_test_types.html#node-nightly-cli-tests">Node nightly CLI tests</a></li>
<li class="toctree-l4"><a class="reference internal" href="process/100_test_types.html#node-cli-tests-on-demand">Node CLI tests (on demand)</a></li>
<li class="toctree-l4"><a class="reference internal" href="process/100_test_types.html#node-sync-tests">Node sync tests</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="process/100_test_types.html#db-sync-system-tests">DB Sync system tests</a><ul>
<li class="toctree-l4"><a class="reference internal" href="process/100_test_types.html#db-sync-nightly-tests">DB Sync nightly tests</a></li>
<li class="toctree-l4"><a class="reference internal" href="process/100_test_types.html#db-sync-feature-tests-on-demand">DB Sync feature tests (on demand)</a></li>
<li class="toctree-l4"><a class="reference internal" href="process/100_test_types.html#db-sync-sync-tests">DB Sync sync tests</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="process/100_test_types.html#exploratory-testing">Exploratory testing</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="process/200_quality_control_strategy.html">Quality control strategy</a><ul>
<li class="toctree-l3"><a class="reference internal" href="process/200_quality_control_strategy.html#scope-and-objectives">Scope and objectives</a></li>
<li class="toctree-l3"><a class="reference internal" href="process/200_quality_control_strategy.html#key-principles">Key principles</a></li>
<li class="toctree-l3"><a class="reference internal" href="process/200_quality_control_strategy.html#quality-control-approach">Quality control approach</a></li>
<li class="toctree-l3"><a class="reference internal" href="process/200_quality_control_strategy.html#quality-control-methodology">Quality control methodology</a><ul>
<li class="toctree-l4"><a class="reference internal" href="process/200_quality_control_strategy.html#active-quality-control">Active quality control</a></li>
<li class="toctree-l4"><a class="reference internal" href="process/200_quality_control_strategy.html#passive-quality-control">Passive quality control</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="process/300_uat_strategy.html">User acceptance test strategy</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="how-tos.html">How Tos</a><ul>
<li class="toctree-l2"><a class="reference internal" href="how-tos/300_running_local_cluster.html">How to start a local cluster</a><ul>
<li class="toctree-l3"><a class="reference internal" href="how-tos/300_running_local_cluster.html#what-is-a-local-cluster">What is a local cluster</a><ul>
<li class="toctree-l4"><a class="reference internal" href="how-tos/300_running_local_cluster.html#local-cluster-parameters">Local cluster parameters</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="how-tos/300_running_local_cluster.html#requirements">Requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="how-tos/300_running_local_cluster.html#initial-setup-for-all-cardano-components">Initial setup for all Cardano components</a><ul>
<li class="toctree-l4"><a class="reference internal" href="how-tos/300_running_local_cluster.html#starting-postgres-test-database">Starting Postgres test database</a></li>
<li class="toctree-l4"><a class="reference internal" href="how-tos/300_running_local_cluster.html#preparing-local-cluster-scripts">Preparing local cluster scripts</a></li>
<li class="toctree-l4"><a class="reference internal" href="how-tos/300_running_local_cluster.html#adjusting-some-parameter-values">Adjusting some parameter values</a></li>
<li class="toctree-l4"><a class="reference internal" href="how-tos/300_running_local_cluster.html#start-the-local-cluster">Start the local cluster</a></li>
<li class="toctree-l4"><a class="reference internal" href="how-tos/300_running_local_cluster.html#stop-the-local-cluster">Stop the local cluster</a></li>
<li class="toctree-l4"><a class="reference internal" href="how-tos/300_running_local_cluster.html#set-the-tx-era">Set the TX_Era</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="how-tos/300_running_local_cluster.html#run-tests">Run tests</a><ul>
<li class="toctree-l4"><a class="reference internal" href="how-tos/300_running_local_cluster.html#run-test-suite-from-file">Run test suite from file</a></li>
<li class="toctree-l4"><a class="reference internal" href="how-tos/300_running_local_cluster.html#run-a-single-test">Run a single test</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="how-tos/300_running_local_cluster.html#interact-with-the-node">Interact with the node</a><ul>
<li class="toctree-l4"><a class="reference internal" href="how-tos/300_running_local_cluster.html#transfer-funds-to-your-address">Transfer funds to your address</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="how-tos/300_running_local_cluster.html#debugging-with-ipython">Debugging with IPython</a></li>
<li class="toctree-l3"><a class="reference internal" href="how-tos/300_running_local_cluster.html#logs-for-cardano-node-and-db-sync">Logs for <code class="docutils literal notranslate"><span class="pre">cardano-node</span></code> and <code class="docutils literal notranslate"><span class="pre">db-sync</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="how-tos/300_running_local_cluster.html#accessing-the-db-sync-database">Accessing the <code class="docutils literal notranslate"><span class="pre">db-sync</span></code> database</a><ul>
<li class="toctree-l4"><a class="reference internal" href="how-tos/300_running_local_cluster.html#useful-queries">Useful queries</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="how-tos/300_running_local_cluster.html#additional-resources">Additional resources</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="how-tos/350_mir_cert_test_example_manual_steps.html">Testing MIR certificate submission with a local cluster</a><ul>
<li class="toctree-l3"><a class="reference internal" href="how-tos/350_mir_cert_test_example_manual_steps.html#creating-key-pairs">Creating key pairs</a><ul>
<li class="toctree-l4"><a class="reference internal" href="how-tos/350_mir_cert_test_example_manual_steps.html#payment-key-pair">Payment key pair</a></li>
<li class="toctree-l4"><a class="reference internal" href="how-tos/350_mir_cert_test_example_manual_steps.html#stake-key-pair">Stake key pair</a></li>
<li class="toctree-l4"><a class="reference internal" href="how-tos/350_mir_cert_test_example_manual_steps.html#payment-address">Payment address</a></li>
<li class="toctree-l4"><a class="reference internal" href="how-tos/350_mir_cert_test_example_manual_steps.html#stake-address">Stake address</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="how-tos/350_mir_cert_test_example_manual_steps.html#transferring-funds-from-the-faucet-address-to-our-own-shelley-address-payment-addr">Transferring funds from the ‘faucet’ address to our own Shelley address <code class="docutils literal notranslate"><span class="pre">payment.addr</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="how-tos/350_mir_cert_test_example_manual_steps.html#build-tx">Build tx</a></li>
<li class="toctree-l4"><a class="reference internal" href="how-tos/350_mir_cert_test_example_manual_steps.html#sign-tx">Sign tx</a></li>
<li class="toctree-l4"><a class="reference internal" href="how-tos/350_mir_cert_test_example_manual_steps.html#submit-tx">Submit tx</a></li>
<li class="toctree-l4"><a class="reference internal" href="how-tos/350_mir_cert_test_example_manual_steps.html#check-funds-on-the-payment-addr">Check funds on the payment.addr</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="how-tos/350_mir_cert_test_example_manual_steps.html#creating-a-stake-registration-certificate">Creating a stake registration certificate</a><ul>
<li class="toctree-l4"><a class="reference internal" href="how-tos/350_mir_cert_test_example_manual_steps.html#submitting-the-certificate-with-a-transaction">Submitting the certificate with a transaction</a></li>
<li class="toctree-l4"><a class="reference internal" href="how-tos/350_mir_cert_test_example_manual_steps.html#our-stake-address-has-id-13-and-is-registered">Our stake address has id=13 and is registered</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="how-tos/350_mir_cert_test_example_manual_steps.html#deregistering-an-empty-stake-address">Deregistering an ‘empty’ stake address</a><ul>
<li class="toctree-l4"><a class="reference internal" href="how-tos/350_mir_cert_test_example_manual_steps.html#creating-a-deregistration-certificate">Creating a deregistration certificate</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="how-tos/350_mir_cert_test_example_manual_steps.html#generating-mir-cert-to-send-funds-from-reserves-to-unregistered-stake-address">Generating MIR cert to send funds from reserves to unregistered stake address</a><ul>
<li class="toctree-l4"><a class="reference internal" href="how-tos/350_mir_cert_test_example_manual_steps.html#id4">Build tx</a></li>
<li class="toctree-l4"><a class="reference internal" href="how-tos/350_mir_cert_test_example_manual_steps.html#id5">Sign tx</a></li>
<li class="toctree-l4"><a class="reference internal" href="how-tos/350_mir_cert_test_example_manual_steps.html#id6">Submit tx</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="how-tos/350_mir_cert_test_example_manual_steps.html#state-of-tables-after-mir-cert-tx-submission">State of tables after MIR cert tx submission</a></li>
<li class="toctree-l3"><a class="reference internal" href="how-tos/350_mir_cert_test_example_manual_steps.html#logs">Logs</a><ul>
<li class="toctree-l4"><a class="reference internal" href="how-tos/350_mir_cert_test_example_manual_steps.html#stdout-log">stdout.log</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="how-tos/380_stake_credential_history_tool.html">Stake credential history tool</a><ul>
<li class="toctree-l3"><a class="reference internal" href="how-tos/380_stake_credential_history_tool.html#documentation">Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="how-tos/380_stake_credential_history_tool.html#example-of-usage">Example of usage</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="how-tos/500_smash_faq.html">SMASH FAQ</a></li>
<li class="toctree-l2"><a class="reference internal" href="how-tos/520_smash_tests_and_debugging_examples.html">SMASH - tests and debugging examples</a><ul>
<li class="toctree-l3"><a class="reference internal" href="how-tos/520_smash_tests_and_debugging_examples.html#checking-smash-status">Checking SMASH status</a></li>
<li class="toctree-l3"><a class="reference internal" href="how-tos/520_smash_tests_and_debugging_examples.html#fetching-of-the-metadata">Fetching of the metadata</a></li>
<li class="toctree-l3"><a class="reference internal" href="how-tos/520_smash_tests_and_debugging_examples.html#delisting-pools">Delisting pools</a></li>
<li class="toctree-l3"><a class="reference internal" href="how-tos/520_smash_tests_and_debugging_examples.html#reserving-a-ticker">Reserving a ticker</a></li>
<li class="toctree-l3"><a class="reference internal" href="how-tos/520_smash_tests_and_debugging_examples.html#whitelisting">Whitelisting</a></li>
<li class="toctree-l3"><a class="reference internal" href="how-tos/520_smash_tests_and_debugging_examples.html#checking-pool-rejection-errors">Checking pool rejection errors</a></li>
<li class="toctree-l3"><a class="reference internal" href="how-tos/520_smash_tests_and_debugging_examples.html#pool-unregistrations">Pool unregistrations</a></li>
<li class="toctree-l3"><a class="reference internal" href="how-tos/520_smash_tests_and_debugging_examples.html#fetch-policies-from-another-smash-service">Fetch policies from another SMASH service</a></li>
<li class="toctree-l3"><a class="reference internal" href="how-tos/520_smash_tests_and_debugging_examples.html#an-example-of-debugging-an-issue-with-a-pool">An example of debugging an issue with a pool</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="contribute/contributing.html">Contributing to the Cardano node tests repository</a><ul>
<li class="toctree-l2"><a class="reference internal" href="contribute/contributing.html#how-can-i-contribute">How can I contribute?</a><ul>
<li class="toctree-l3"><a class="reference internal" href="contribute/contributing.html#reporting-an-issue">Reporting an issue</a><ul>
<li class="toctree-l4"><a class="reference internal" href="contribute/contributing.html#how-do-i-submit-a-good-issue-report">How do I submit a (good) issue report?</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="contribute/contributing.html#your-first-code-contribution">Your first code contribution</a><ul>
<li class="toctree-l4"><a class="reference internal" href="contribute/contributing.html#pull-requests">Pull requests</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="contribute/contributing.html#id1">Style guides</a><ul>
<li class="toctree-l3"><a class="reference internal" href="contribute/contributing.html#git-commit-messages">Git commit messages</a></li>
<li class="toctree-l3"><a class="reference internal" href="contribute/contributing.html#python-style-guide">Python style guide</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="contribute/contributing.html#roles-and-responsibilities">Roles and Responsibilities</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">Source Documentation</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="cardano_node_tests.html">cardano_node_tests package</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="cardano_node_tests.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="cardano_node_tests.cluster_management.html">cardano_node_tests.cluster_management package</a></li>
<li class="toctree-l4"><a class="reference internal" href="cardano_node_tests.pytest_plugins.html">cardano_node_tests.pytest_plugins package</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="cardano_node_tests.tests.html">cardano_node_tests.tests package</a></li>
<li class="toctree-l4"><a class="reference internal" href="cardano_node_tests.utils.html">cardano_node_tests.utils package</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cardano_node_tests.html#submodules">Submodules</a></li>
<li class="toctree-l3"><a class="reference internal" href="cardano_node_tests.html#module-cardano_node_tests.cardano_cli_coverage">cardano_node_tests.cardano_cli_coverage module</a></li>
<li class="toctree-l3"><a class="reference internal" href="cardano_node_tests.html#module-cardano_node_tests.prepare_cluster_scripts">cardano_node_tests.prepare_cluster_scripts module</a></li>
<li class="toctree-l3"><a class="reference internal" href="cardano_node_tests.html#module-cardano_node_tests.split_topology">cardano_node_tests.split_topology module</a></li>
<li class="toctree-l3"><a class="reference internal" href="cardano_node_tests.html#module-cardano_node_tests.testnet_cleanup">cardano_node_tests.testnet_cleanup module</a></li>
<li class="toctree-l3"><a class="reference internal" href="cardano_node_tests.html#module-cardano_node_tests">Module contents</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">cardano-node-tests</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="modules.html">Source Documentation</a></li>
          <li class="breadcrumb-item"><a href="cardano_node_tests.html">cardano_node_tests package</a></li>
          <li class="breadcrumb-item"><a href="cardano_node_tests.tests.html">cardano_node_tests.tests package</a></li>
      <li class="breadcrumb-item active">cardano_node_tests.tests.tests_plutus package</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/input-output-hk/cardano-node-tests/blob/master/src_docs/source/cardano_node_tests.tests.tests_plutus.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="cardano-node-tests-tests-tests-plutus-package">
<h1>cardano_node_tests.tests.tests_plutus package<a class="headerlink" href="#cardano-node-tests-tests-tests-plutus-package" title="Permalink to this headline"></a></h1>
<section id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline"></a></h2>
</section>
<section id="module-cardano_node_tests.tests.tests_plutus.mint_build">
<span id="cardano-node-tests-tests-tests-plutus-mint-build-module"></span><h2>cardano_node_tests.tests.tests_plutus.mint_build module<a class="headerlink" href="#module-cardano_node_tests.tests.tests_plutus.mint_build" title="Permalink to this headline"></a></h2>
</section>
<section id="module-cardano_node_tests.tests.tests_plutus.mint_raw">
<span id="cardano-node-tests-tests-tests-plutus-mint-raw-module"></span><h2>cardano_node_tests.tests.tests_plutus.mint_raw module<a class="headerlink" href="#module-cardano_node_tests.tests.tests_plutus.mint_raw" title="Permalink to this headline"></a></h2>
</section>
<section id="module-cardano_node_tests.tests.tests_plutus.spend_build">
<span id="cardano-node-tests-tests-tests-plutus-spend-build-module"></span><h2>cardano_node_tests.tests.tests_plutus.spend_build module<a class="headerlink" href="#module-cardano_node_tests.tests.tests_plutus.spend_build" title="Permalink to this headline"></a></h2>
</section>
<section id="module-cardano_node_tests.tests.tests_plutus.spend_raw">
<span id="cardano-node-tests-tests-tests-plutus-spend-raw-module"></span><h2>cardano_node_tests.tests.tests_plutus.spend_raw module<a class="headerlink" href="#module-cardano_node_tests.tests.tests_plutus.spend_raw" title="Permalink to this headline"></a></h2>
</section>
<section id="module-cardano_node_tests.tests.tests_plutus.test_delegation">
<span id="cardano-node-tests-tests-tests-plutus-test-delegation-module"></span><h2>cardano_node_tests.tests.tests_plutus.test_delegation module<a class="headerlink" href="#module-cardano_node_tests.tests.tests_plutus.test_delegation" title="Permalink to this headline"></a></h2>
<p>Tests for delegation of Plutus script stake address.</p>
<ul class="simple">
<li><p>stake address registration</p></li>
<li><p>stake address delegation</p></li>
<li><p>rewards withdrawal</p></li>
<li><p>stake address deregistration</p></li>
</ul>
<dl class="py class">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_delegation.TestDelegateAddr">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">cardano_node_tests.tests.tests_plutus.test_delegation.</span></span><span class="sig-name descname"><span class="pre">TestDelegateAddr</span></span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_delegation.py#L316-L484"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_delegation.TestDelegateAddr" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Tests for address delegation to stake pools.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_delegation.TestDelegateAddr.pytestmark">
<span class="sig-name descname"><span class="pre">pytestmark</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">[Mark(name='parametrize',</span> <span class="pre">args=('use_build_cmd',</span> <span class="pre">(False,</span> <span class="pre">ParameterSet(values=(True,),</span> <span class="pre">marks=(MarkDecorator(mark=Mark(name='skipif',</span> <span class="pre">args=(True,),</span> <span class="pre">kwargs={'reason':</span> <span class="pre">&quot;cannot</span> <span class="pre">use</span> <span class="pre">`build`</span> <span class="pre">with</span> <span class="pre">Tx</span> <span class="pre">era</span> <span class="pre">'alonzo',</span> <span class="pre">see</span> <span class="pre">node</span> <span class="pre">issue</span> <span class="pre">#5109&quot;})),),</span> <span class="pre">id=None))),</span> <span class="pre">kwargs={'ids':</span> <span class="pre">('build_raw',</span> <span class="pre">'build')}),</span> <span class="pre">Mark(name='parametrize',</span> <span class="pre">args=('plutus_version',</span> <span class="pre">('v1',</span> <span class="pre">ParameterSet(values=('v2',),</span> <span class="pre">marks=(MarkDecorator(mark=Mark(name='skipif',</span> <span class="pre">args=(True,),</span> <span class="pre">kwargs={'reason':</span> <span class="pre">'Plutus</span> <span class="pre">V2</span> <span class="pre">is</span> <span class="pre">available</span> <span class="pre">only</span> <span class="pre">in</span> <span class="pre">Babbage+</span> <span class="pre">eras'})),),</span> <span class="pre">id=None))),</span> <span class="pre">kwargs={'ids':</span> <span class="pre">('plutus_v1',</span> <span class="pre">'plutus_v2')}),</span> <span class="pre">Mark(name='skipif',</span> <span class="pre">args=(True,),</span> <span class="pre">kwargs={'reason':</span> <span class="pre">&quot;cannot</span> <span class="pre">use</span> <span class="pre">`build`</span> <span class="pre">with</span> <span class="pre">Tx</span> <span class="pre">era</span> <span class="pre">'alonzo',</span> <span class="pre">see</span> <span class="pre">node</span> <span class="pre">issue</span> <span class="pre">#5109&quot;}),</span> <span class="pre">Mark(name='order',</span> <span class="pre">args=(8,),</span> <span class="pre">kwargs={})]</span></em><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_delegation.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_delegation.TestDelegateAddr.pytestmark" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_delegation.TestDelegateAddr.test_delegate_deregister">
<span class="sig-name descname"><span class="pre">test_delegate_deregister</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster_lock_42stake</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pool_user</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="cardano_node_tests.tests.html#cardano_node_tests.tests.delegation.PoolUserScript" title="cardano_node_tests.tests.delegation.PoolUserScript"><span class="pre">cardano_node_tests.tests.delegation.PoolUserScript</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">plutus_version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_build_cmd</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_delegation.py#L323-L484"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_delegation.TestDelegateAddr.test_delegate_deregister" title="Permalink to this definition"></a></dt>
<dd><p>Delegate and deregister Plutus script stake address.</p>
<ul class="simple">
<li><p>submit registration certificate and delegate stake address to pool</p></li>
<li><p>check that the stake address was delegated</p></li>
<li><p>withdraw rewards to payment address and deregister stake address</p></li>
<li><p>check that the key deposit was returned and rewards withdrawn</p></li>
<li><p>check that the stake address is no longer delegated</p></li>
<li><p>(optional) check records in db-sync</p></li>
</ul>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_delegation.cluster_lock_42stake">
<span class="sig-prename descclassname"><span class="pre">cardano_node_tests.tests.tests_plutus.test_delegation.</span></span><span class="sig-name descname"><span class="pre">cluster_lock_42stake</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster_manager</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="cardano_node_tests.cluster_management.html#cardano_node_tests.cluster_management.manager.ClusterManager" title="cardano_node_tests.cluster_management.manager.ClusterManager"><span class="pre">cardano_node_tests.cluster_management.manager.ClusterManager</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_delegation.py#L37-L66"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_delegation.cluster_lock_42stake" title="Permalink to this definition"></a></dt>
<dd><p>Make sure just one staking Plutus test run at a time.</p>
<p>Plutus script always has the same address. When one script is used in multiple
tests that are running in parallel, the balances etc. don’t add up.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_delegation.delegate_stake_addr">
<span class="sig-prename descclassname"><span class="pre">cardano_node_tests.tests.tests_plutus.test_delegation.</span></span><span class="sig-name descname"><span class="pre">delegate_stake_addr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster_obj</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">temp_template</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">txins</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">collaterals</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pool_user</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="cardano_node_tests.tests.html#cardano_node_tests.tests.delegation.PoolUserScript" title="cardano_node_tests.tests.delegation.PoolUserScript"><span class="pre">cardano_node_tests.tests.delegation.PoolUserScript</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">pool_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">redeemer_file</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">pathlib.Path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reference_script_utxos</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_build_cmd</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.TxRawOutput</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">dict</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_delegation.py#L111-L201"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_delegation.delegate_stake_addr" title="Permalink to this definition"></a></dt>
<dd><p>Submit registration certificate and delegate to pool.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_delegation.deregister_stake_addr">
<span class="sig-prename descclassname"><span class="pre">cardano_node_tests.tests.tests_plutus.test_delegation.</span></span><span class="sig-name descname"><span class="pre">deregister_stake_addr</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster_obj</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">temp_template</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">txins</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">collaterals</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pool_user</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="cardano_node_tests.tests.html#cardano_node_tests.tests.delegation.PoolUserScript" title="cardano_node_tests.tests.delegation.PoolUserScript"><span class="pre">cardano_node_tests.tests.delegation.PoolUserScript</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">redeemer_file</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">pathlib.Path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reference_script_utxos</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_build_cmd</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.TxRawOutput</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">dict</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_delegation.py#L204-L311"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_delegation.deregister_stake_addr" title="Permalink to this definition"></a></dt>
<dd><p>Deregister stake address.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_delegation.pool_user">
<span class="sig-prename descclassname"><span class="pre">cardano_node_tests.tests.tests_plutus.test_delegation.</span></span><span class="sig-name descname"><span class="pre">pool_user</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster_manager</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="cardano_node_tests.cluster_management.html#cardano_node_tests.cluster_management.manager.ClusterManager" title="cardano_node_tests.cluster_management.manager.ClusterManager"><span class="pre">cardano_node_tests.cluster_management.manager.ClusterManager</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">cluster_lock_42stake</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="cardano_node_tests.tests.html#cardano_node_tests.tests.delegation.PoolUserScript" title="cardano_node_tests.tests.delegation.PoolUserScript"><span class="pre">cardano_node_tests.tests.delegation.PoolUserScript</span></a></span></span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_delegation.py#L69-L108"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_delegation.pool_user" title="Permalink to this definition"></a></dt>
<dd><p>Create pool user.</p>
</dd></dl>

</section>
<section id="module-cardano_node_tests.tests.tests_plutus.test_lobster">
<span id="cardano-node-tests-tests-tests-plutus-test-lobster-module"></span><h2>cardano_node_tests.tests.tests_plutus.test_lobster module<a class="headerlink" href="#module-cardano_node_tests.tests.tests_plutus.test_lobster" title="Permalink to this headline"></a></h2>
<p>Tests for the “Lobster Challenge”.</p>
<p>See <a class="reference external" href="https://github.com/input-output-hk/lobster-challenge">https://github.com/input-output-hk/lobster-challenge</a></p>
<dl class="py class">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_lobster.TestLobsterChallenge">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">cardano_node_tests.tests.tests_plutus.test_lobster.</span></span><span class="sig-name descname"><span class="pre">TestLobsterChallenge</span></span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_lobster.py#L253-L494"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_lobster.TestLobsterChallenge" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py attribute">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_lobster.TestLobsterChallenge.pytestmark">
<span class="sig-name descname"><span class="pre">pytestmark</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">[Mark(name='skipif',</span> <span class="pre">args=(True,),</span> <span class="pre">kwargs={'reason':</span> <span class="pre">&quot;cannot</span> <span class="pre">use</span> <span class="pre">`build`</span> <span class="pre">with</span> <span class="pre">Tx</span> <span class="pre">era</span> <span class="pre">'alonzo',</span> <span class="pre">see</span> <span class="pre">node</span> <span class="pre">issue</span> <span class="pre">#5109&quot;})]</span></em><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_lobster.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_lobster.TestLobsterChallenge.pytestmark" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_lobster.TestLobsterChallenge.test_lobster_name">
<span class="sig-name descname"><span class="pre">test_lobster_name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">payment_addrs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_lobster.py#L255-L494"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_lobster.TestLobsterChallenge.test_lobster_name" title="Permalink to this definition"></a></dt>
<dd><p>Test the Lobster Challenge.</p>
<p>Uses <cite>cardano-cli transaction build</cite> command for building the transactions.</p>
<ul class="simple">
<li><p>fund token issuer and create a UTxO for collateral</p></li>
<li><p>mint the LobsterNFT token</p></li>
<li><p>deploy the LobsterNFT token to address of lobster spending script</p></li>
<li><p>generate random votes and determine the expected final value</p></li>
<li><p>perform voting and check that the final value matches the expected value</p></li>
<li><p>(optional) check transactions in db-sync</p></li>
</ul>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_lobster.payment_addrs">
<span class="sig-prename descclassname"><span class="pre">cardano_node_tests.tests.tests_plutus.test_lobster.</span></span><span class="sig-name descname"><span class="pre">payment_addrs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster_manager</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="cardano_node_tests.cluster_management.html#cardano_node_tests.cluster_management.manager.ClusterManager" title="cardano_node_tests.cluster_management.manager.ClusterManager"><span class="pre">cardano_node_tests.cluster_management.manager.ClusterManager</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_lobster.py#L39-L59"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_lobster.payment_addrs" title="Permalink to this definition"></a></dt>
<dd><p>Create new payment address.</p>
</dd></dl>

</section>
<section id="module-cardano_node_tests.tests.tests_plutus.test_mint_build">
<span id="cardano-node-tests-tests-tests-plutus-test-mint-build-module"></span><h2>cardano_node_tests.tests.tests_plutus.test_mint_build module<a class="headerlink" href="#module-cardano_node_tests.tests.tests_plutus.test_mint_build" title="Permalink to this headline"></a></h2>
<p>Tests for minting with Plutus using <cite>transaction build</cite>.</p>
<dl class="py class">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_mint_build.TestBuildMinting">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">cardano_node_tests.tests.tests_plutus.test_mint_build.</span></span><span class="sig-name descname"><span class="pre">TestBuildMinting</span></span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_mint_build.py#L57-L1054"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_mint_build.TestBuildMinting" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Tests for minting using Plutus smart contracts and <cite>transaction build</cite>.</p>
<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_mint_build.TestBuildMinting.past_horizon_funds">
<span class="sig-name descname"><span class="pre">past_horizon_funds</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster_manager</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="cardano_node_tests.cluster_management.html#cardano_node_tests.cluster_management.manager.ClusterManager" title="cardano_node_tests.cluster_management.manager.ClusterManager"><span class="pre">cardano_node_tests.cluster_management.manager.ClusterManager</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">payment_addrs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">cardano_clusterlib.structs.TxRawOutput</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_mint_build.py#L60-L94"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_mint_build.TestBuildMinting.past_horizon_funds" title="Permalink to this definition"></a></dt>
<dd><p>Create UTxOs for <cite>test_ttl_horizon</cite>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_mint_build.TestBuildMinting.test_minting_context_equivalence">
<span class="sig-name descname"><span class="pre">test_minting_context_equivalence</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">payment_addrs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_mint_build.py#L603-L786"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_mint_build.TestBuildMinting.test_minting_context_equivalence" title="Permalink to this definition"></a></dt>
<dd><p>Test context equivalence while minting a token.</p>
<p>Uses <cite>cardano-cli transaction build</cite> command for building the transactions.</p>
<ul class="simple">
<li><p>fund the token issuer and create a UTxO for collateral</p></li>
<li><p>check that the expected amount was transferred to token issuer’s address</p></li>
<li><p>generate a dummy redeemer and a dummy Tx</p></li>
<li><p>derive the correct redeemer from the dummy Tx</p></li>
<li><p>mint the token using the derived redeemer</p></li>
<li><p>check that the token was minted and collateral UTxO was not spent</p></li>
<li><p>check expected Plutus cost</p></li>
<li><p>(optional) check transactions in db-sync</p></li>
</ul>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_mint_build.TestBuildMinting.test_minting_one_token">
<span class="sig-name descname"><span class="pre">test_minting_one_token</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">payment_addrs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plutus_version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_mint_build.py#L96-L224"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_mint_build.TestBuildMinting.test_minting_one_token" title="Permalink to this definition"></a></dt>
<dd><p>Test minting a token with a Plutus script.</p>
<p>Uses <cite>cardano-cli transaction build</cite> command for building the transactions.</p>
<ul class="simple">
<li><p>fund the token issuer and create a UTxO for collateral</p></li>
<li><p>check that the expected amount was transferred to token issuer’s address</p></li>
<li><p>mint the token using a Plutus script</p></li>
<li><p>check that the token was minted and collateral UTxO was not spent</p></li>
<li><p>check expected fees</p></li>
<li><p>check expected Plutus cost</p></li>
<li><p>(optional) check transactions in db-sync</p></li>
</ul>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_mint_build.TestBuildMinting.test_time_range_minting">
<span class="sig-name descname"><span class="pre">test_time_range_minting</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">payment_addrs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_mint_build.py#L226-L357"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_mint_build.TestBuildMinting.test_time_range_minting" title="Permalink to this definition"></a></dt>
<dd><p>Test minting a token with a time constraints Plutus script.</p>
<p>Uses <cite>cardano-cli transaction build</cite> command for building the transactions.</p>
<ul class="simple">
<li><p>fund the token issuer and create a UTxO for collateral</p></li>
<li><p>check that the expected amount was transferred to token issuer’s address</p></li>
<li><p>mint the token using a Plutus script</p></li>
<li><p>check that the token was minted and collateral UTxO was not spent</p></li>
<li><p>check expected fees</p></li>
<li><p>check expected Plutus cost</p></li>
<li><p>(optional) check transactions in db-sync</p></li>
</ul>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_mint_build.TestBuildMinting.test_ttl_horizon">
<span class="sig-name descname"><span class="pre">test_ttl_horizon</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">payment_addrs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">past_horizon_funds</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">cardano_clusterlib.structs.TxRawOutput</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plutus_version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ttl_offset</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_mint_build.py#L935-L1054"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_mint_build.TestBuildMinting.test_ttl_horizon" title="Permalink to this definition"></a></dt>
<dd><p>Test minting a token with ttl far in the future.</p>
<p>Uses <cite>cardano-cli transaction build</cite> command for building the transactions.</p>
<ul class="simple">
<li><p>try to mint a token using a Plutus script when ttl is set far in the future</p></li>
<li><p>check that minting failed because of ‘PastHorizon’ failure when ttl is too far
in the future</p></li>
</ul>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_mint_build.TestBuildMinting.test_two_scripts_minting">
<span class="sig-name descname"><span class="pre">test_two_scripts_minting</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">payment_addrs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plutus_version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_mint_build.py#L359-L601"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_mint_build.TestBuildMinting.test_two_scripts_minting" title="Permalink to this definition"></a></dt>
<dd><p>Test minting two tokens with two different Plutus scripts.</p>
<p>Uses <cite>cardano-cli transaction build</cite> command for building the transactions.</p>
<ul class="simple">
<li><p>fund the token issuer and create a UTxO for collaterals</p></li>
<li><p>check that the expected amount was transferred to token issuer’s address</p></li>
<li><p>mint the tokens using two different Plutus scripts</p></li>
<li><p>check that the tokens were minted and collateral UTxOs were not spent</p></li>
<li><p>check transaction view output</p></li>
<li><p>check expected fees</p></li>
<li><p>check expected Plutus cost</p></li>
<li><p>(optional) check transactions in db-sync</p></li>
</ul>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_mint_build.TestBuildMinting.test_witness_redeemer">
<span class="sig-name descname"><span class="pre">test_witness_redeemer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">payment_addrs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_mint_build.py#L788-L933"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_mint_build.TestBuildMinting.test_witness_redeemer" title="Permalink to this definition"></a></dt>
<dd><p>Test minting a token with a Plutus script.</p>
<p>Uses <cite>cardano-cli transaction build</cite> command for building the transactions.</p>
<ul class="simple">
<li><p>fund the token issuer and create a UTxO for collateral</p></li>
<li><p>check that the expected amount was transferred to token issuer’s address</p></li>
<li><p>mint the token using a Plutus script with required signer</p></li>
<li><p>check that the token was minted and collateral UTxO was not spent</p></li>
<li><p>check expected fees</p></li>
<li><p>check expected Plutus cost</p></li>
<li><p>(optional) check transactions in db-sync</p></li>
</ul>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_mint_build.TestCollateralOutput">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">cardano_node_tests.tests.tests_plutus.test_mint_build.</span></span><span class="sig-name descname"><span class="pre">TestCollateralOutput</span></span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_mint_build.py#L1057-L1188"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_mint_build.TestCollateralOutput" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Tests for collateral output.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_mint_build.TestCollateralOutput.pytestmark">
<span class="sig-name descname"><span class="pre">pytestmark</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">[Mark(name='testnets',</span> <span class="pre">args=(),</span> <span class="pre">kwargs={})]</span></em><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_mint_build.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_mint_build.TestCollateralOutput.pytestmark" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_mint_build.TestCollateralOutput.test_duplicated_collateral">
<span class="sig-name descname"><span class="pre">test_duplicated_collateral</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">payment_addrs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plutus_version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_mint_build.py#L1061-L1188"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_mint_build.TestCollateralOutput.test_duplicated_collateral" title="Permalink to this definition"></a></dt>
<dd><p>Test minting a token with a Plutus script while using the same collateral input twice.</p>
<p>Tests <a class="reference external" href="https://github.com/input-output-hk/cardano-node/issues/4744">https://github.com/input-output-hk/cardano-node/issues/4744</a></p>
<p>Uses <cite>cardano-cli transaction build</cite> command for building the transactions.</p>
<ul class="simple">
<li><p>fund the token issuer and create a UTxO for collateral and possibly reference script</p></li>
<li><p>check that the expected amount was transferred to token issuer’s address</p></li>
<li><p>mint the token using a Plutus script and the same collateral UTxO listed twice</p></li>
<li><p>check that the token was minted and collateral UTxO was not spent</p></li>
<li><p>check that the return collateral amount is the expected</p></li>
</ul>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_mint_build.payment_addrs">
<span class="sig-prename descclassname"><span class="pre">cardano_node_tests.tests.tests_plutus.test_mint_build.</span></span><span class="sig-name descname"><span class="pre">payment_addrs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster_manager</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="cardano_node_tests.cluster_management.html#cardano_node_tests.cluster_management.manager.ClusterManager" title="cardano_node_tests.cluster_management.manager.ClusterManager"><span class="pre">cardano_node_tests.cluster_management.manager.ClusterManager</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_mint_build.py#L34-L54"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_mint_build.payment_addrs" title="Permalink to this definition"></a></dt>
<dd><p>Create new payment address.</p>
</dd></dl>

</section>
<section id="module-cardano_node_tests.tests.tests_plutus.test_mint_negative_build">
<span id="cardano-node-tests-tests-tests-plutus-test-mint-negative-build-module"></span><h2>cardano_node_tests.tests.tests_plutus.test_mint_negative_build module<a class="headerlink" href="#module-cardano_node_tests.tests.tests_plutus.test_mint_negative_build" title="Permalink to this headline"></a></h2>
<p>Negative tests for minting with Plutus using <cite>transaction build</cite>.</p>
<dl class="py class">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_mint_negative_build.TestBuildMintingNegative">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">cardano_node_tests.tests.tests_plutus.test_mint_negative_build.</span></span><span class="sig-name descname"><span class="pre">TestBuildMintingNegative</span></span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_mint_negative_build.py#L60-L429"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_mint_negative_build.TestBuildMintingNegative" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Tests for minting with Plutus using <cite>transaction build</cite> that are expected to fail.</p>
<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_mint_negative_build.TestBuildMintingNegative.fund_issuer_long_asset_name">
<span class="sig-name descname"><span class="pre">fund_issuer_long_asset_name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">payment_addrs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_mint_negative_build.py#L63-L86"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_mint_negative_build.TestBuildMintingNegative.fund_issuer_long_asset_name" title="Permalink to this definition"></a></dt>
<dd><p>Fund the token issuer and create the collateral UTxO.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_mint_negative_build.TestBuildMintingNegative.test_asset_name_too_long">
<span class="sig-name descname"><span class="pre">test_asset_name_too_long</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fund_issuer_long_asset_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_mint_negative_build.py#L264-L343"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_mint_negative_build.TestBuildMintingNegative.test_asset_name_too_long" title="Permalink to this definition"></a></dt>
<dd><p>Test minting a token and ‘calculate-min-required-utxo’ with a name longer than allowed.</p>
<p>Expect failure.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_mint_negative_build.TestBuildMintingNegative.test_redeemer_with_simple_minting_script">
<span class="sig-name descname"><span class="pre">test_redeemer_with_simple_minting_script</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">payment_addrs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_mint_negative_build.py#L175-L262"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_mint_negative_build.TestBuildMintingNegative.test_redeemer_with_simple_minting_script" title="Permalink to this definition"></a></dt>
<dd><p>Test minting a token passing a redeemer for a simple minting script.</p>
<p>Expect failure.</p>
<ul class="simple">
<li><p>fund the token issuer and create a UTxO for collateral</p></li>
<li><p>try to mint the token using a simple script passing a redeemer</p></li>
<li><p>check that the minting failed because a Plutus script is expected</p></li>
</ul>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_mint_negative_build.TestBuildMintingNegative.test_time_range_missing_tx_validity">
<span class="sig-name descname"><span class="pre">test_time_range_missing_tx_validity</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">payment_addrs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_mint_negative_build.py#L345-L429"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_mint_negative_build.TestBuildMintingNegative.test_time_range_missing_tx_validity" title="Permalink to this definition"></a></dt>
<dd><p>Test minting a token with a time constraints Plutus script and no TX validity.</p>
<p>Expect failure.</p>
<p>Uses <cite>cardano-cli transaction build</cite> command for building the transactions.</p>
<ul class="simple">
<li><p>fund the token issuer and create a UTxO for collateral</p></li>
<li><p>check that the expected amount was transferred to token issuer’s address</p></li>
<li><p>try to mint the token using a Plutus script and a TX without validity interval</p></li>
<li><p>check that the minting failed</p></li>
</ul>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_mint_negative_build.TestBuildMintingNegative.test_witness_redeemer_missing_signer">
<span class="sig-name descname"><span class="pre">test_witness_redeemer_missing_signer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">payment_addrs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_mint_negative_build.py#L88-L173"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_mint_negative_build.TestBuildMintingNegative.test_witness_redeemer_missing_signer" title="Permalink to this definition"></a></dt>
<dd><p>Test minting a token with a Plutus script with invalid signers.</p>
<p>Expect failure.</p>
<ul class="simple">
<li><p>fund the token issuer and create a UTxO for collateral</p></li>
<li><p>check that the expected amount was transferred to token issuer’s address</p></li>
<li><p>try to mint the token using a Plutus script and a TX with signing key missing for
the required signer</p></li>
<li><p>check that the minting failed because the required signers were not provided</p></li>
</ul>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_mint_negative_build.payment_addrs">
<span class="sig-prename descclassname"><span class="pre">cardano_node_tests.tests.tests_plutus.test_mint_negative_build.</span></span><span class="sig-name descname"><span class="pre">payment_addrs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster_manager</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="cardano_node_tests.cluster_management.html#cardano_node_tests.cluster_management.manager.ClusterManager" title="cardano_node_tests.cluster_management.manager.ClusterManager"><span class="pre">cardano_node_tests.cluster_management.manager.ClusterManager</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_mint_negative_build.py#L37-L57"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_mint_negative_build.payment_addrs" title="Permalink to this definition"></a></dt>
<dd><p>Create new payment address.</p>
</dd></dl>

</section>
<section id="module-cardano_node_tests.tests.tests_plutus.test_mint_negative_raw">
<span id="cardano-node-tests-tests-tests-plutus-test-mint-negative-raw-module"></span><h2>cardano_node_tests.tests.tests_plutus.test_mint_negative_raw module<a class="headerlink" href="#module-cardano_node_tests.tests.tests_plutus.test_mint_negative_raw" title="Permalink to this headline"></a></h2>
<p>Negative tests for minting with Plutus using <cite>transaction build-raw</cite>.</p>
<dl class="py class">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_mint_negative_raw.TestMintingNegative">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">cardano_node_tests.tests.tests_plutus.test_mint_negative_raw.</span></span><span class="sig-name descname"><span class="pre">TestMintingNegative</span></span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_mint_negative_raw.py#L54-L588"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_mint_negative_raw.TestMintingNegative" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Tests for minting with Plutus using <cite>transaction build-raw</cite> that are expected to fail.</p>
<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_mint_negative_raw.TestMintingNegative.fund_execution_units_above_limit">
<span class="sig-name descname"><span class="pre">fund_execution_units_above_limit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">payment_addrs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pparams</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">request</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_pytest.fixtures.SubRequest</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="cardano_node_tests.tests.html#cardano_node_tests.tests.plutus_common.PlutusOp" title="cardano_node_tests.tests.plutus_common.PlutusOp"><span class="pre">cardano_node_tests.tests.plutus_common.PlutusOp</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_mint_negative_raw.py#L61-L95"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_mint_negative_raw.TestMintingNegative.fund_execution_units_above_limit" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_mint_negative_raw.TestMintingNegative.pparams">
<span class="sig-name descname"><span class="pre">pparams</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span></span></span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_mint_negative_raw.py#L57-L59"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_mint_negative_raw.TestMintingNegative.pparams" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_mint_negative_raw.TestMintingNegative.test_execution_units_above_limit">
<span class="sig-name descname"><span class="pre">test_execution_units_above_limit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">payment_addrs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fund_execution_units_above_limit</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="cardano_node_tests.tests.html#cardano_node_tests.tests.plutus_common.PlutusOp" title="cardano_node_tests.tests.plutus_common.PlutusOp"><span class="pre">cardano_node_tests.tests.plutus_common.PlutusOp</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pparams</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">request</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_pytest.fixtures.FixtureRequest</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_mint_negative_raw.py#L376-L494"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_mint_negative_raw.TestMintingNegative.test_execution_units_above_limit" title="Permalink to this definition"></a></dt>
<dd><p>Test minting a token when execution units are above the limit.</p>
<p>Expect failure.</p>
<ul class="simple">
<li><p>fund the token issuer and create a UTxO for collateral</p></li>
<li><p>try to mint the token when execution units are set above the limits</p></li>
<li><p>check that the minting failed because the execution units were too big</p></li>
</ul>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_mint_negative_raw.TestMintingNegative.test_low_budget">
<span class="sig-name descname"><span class="pre">test_low_budget</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">payment_addrs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plutus_version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_mint_negative_raw.py#L185-L280"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_mint_negative_raw.TestMintingNegative.test_low_budget" title="Permalink to this definition"></a></dt>
<dd><p>Test minting a token when budget is too low.</p>
<p>Expect failure.</p>
<ul class="simple">
<li><p>fund the token issuer and create a UTxO for collateral</p></li>
<li><p>check that the expected amount was transferred to token issuer’s address</p></li>
<li><p>try to mint the token using a Plutus script when execution units are set to half
of the expected values</p></li>
<li><p>check that the minting failed because the budget was overspent</p></li>
</ul>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_mint_negative_raw.TestMintingNegative.test_low_fee">
<span class="sig-name descname"><span class="pre">test_low_fee</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">payment_addrs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plutus_version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_mint_negative_raw.py#L282-L374"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_mint_negative_raw.TestMintingNegative.test_low_fee" title="Permalink to this definition"></a></dt>
<dd><p>Test minting a token when fee is set too low.</p>
<p>Expect failure.</p>
<ul class="simple">
<li><p>fund the token issuer and create a UTxO for collateral</p></li>
<li><p>check that the expected amount was transferred to token issuer’s address</p></li>
<li><p>try to mint a token using a Plutus script when fee is set lower than is the computed fee</p></li>
<li><p>check that minting failed because the fee amount was too low</p></li>
</ul>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_mint_negative_raw.TestMintingNegative.test_time_range_missing_tx_validity">
<span class="sig-name descname"><span class="pre">test_time_range_missing_tx_validity</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">payment_addrs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_mint_negative_raw.py#L496-L588"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_mint_negative_raw.TestMintingNegative.test_time_range_missing_tx_validity" title="Permalink to this definition"></a></dt>
<dd><p>Test minting a token with a time constraints Plutus script and no TX validity.</p>
<p>Expect failure.</p>
<ul class="simple">
<li><p>fund the token issuer and create a UTxO for collateral</p></li>
<li><p>check that the expected amount was transferred to token issuer’s address</p></li>
<li><p>try to mint the token using a Plutus script and a TX without validity interval</p></li>
<li><p>check that the minting failed</p></li>
</ul>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_mint_negative_raw.TestMintingNegative.test_witness_redeemer_missing_signer">
<span class="sig-name descname"><span class="pre">test_witness_redeemer_missing_signer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">payment_addrs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_mint_negative_raw.py#L97-L183"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_mint_negative_raw.TestMintingNegative.test_witness_redeemer_missing_signer" title="Permalink to this definition"></a></dt>
<dd><p>Test minting a token with a Plutus script with invalid signers.</p>
<p>Expect failure.</p>
<ul class="simple">
<li><p>fund the token issuer and create a UTxO for collateral</p></li>
<li><p>check that the expected amount was transferred to token issuer’s address</p></li>
<li><p>try to mint the token using a Plutus script and a TX with signing key missing for
the required signer</p></li>
<li><p>check that the minting failed because the required signers were not provided</p></li>
</ul>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_mint_negative_raw.TestNegativeCollateral">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">cardano_node_tests.tests.tests_plutus.test_mint_negative_raw.</span></span><span class="sig-name descname"><span class="pre">TestNegativeCollateral</span></span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_mint_negative_raw.py#L591-L795"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_mint_negative_raw.TestNegativeCollateral" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Tests for collaterals that are expected to fail.</p>
<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_mint_negative_raw.TestNegativeCollateral.test_minting_with_insufficient_collateral">
<span class="sig-name descname"><span class="pre">test_minting_with_insufficient_collateral</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">payment_addrs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plutus_version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_mint_negative_raw.py#L694-L795"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_mint_negative_raw.TestNegativeCollateral.test_minting_with_insufficient_collateral" title="Permalink to this definition"></a></dt>
<dd><p>Test minting a token with a Plutus script with insufficient collateral.</p>
<p>Expect failure.</p>
<ul class="simple">
<li><p>fund the token issuer and create a UTxO for collateral with insufficient funds</p></li>
<li><p>check that the expected amount was transferred to token issuer’s address</p></li>
<li><p>mint the token using a Plutus script</p></li>
<li><p>check that the minting failed because a collateral with insufficient funds was provided</p></li>
</ul>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_mint_negative_raw.TestNegativeCollateral.test_minting_with_invalid_collaterals">
<span class="sig-name descname"><span class="pre">test_minting_with_invalid_collaterals</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">payment_addrs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plutus_version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_mint_negative_raw.py#L594-L692"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_mint_negative_raw.TestNegativeCollateral.test_minting_with_invalid_collaterals" title="Permalink to this definition"></a></dt>
<dd><p>Test minting a token with a Plutus script with invalid collaterals.</p>
<p>Expect failure.</p>
<ul class="simple">
<li><p>fund the token issuer and create an UTxO for collateral with insufficient funds</p></li>
<li><p>check that the expected amount was transferred to token issuer’s address</p></li>
<li><p>mint the token using a Plutus script</p></li>
<li><p>check that the minting failed because no valid collateral was provided</p></li>
</ul>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_mint_negative_raw.payment_addrs">
<span class="sig-prename descclassname"><span class="pre">cardano_node_tests.tests.tests_plutus.test_mint_negative_raw.</span></span><span class="sig-name descname"><span class="pre">payment_addrs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster_manager</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="cardano_node_tests.cluster_management.html#cardano_node_tests.cluster_management.manager.ClusterManager" title="cardano_node_tests.cluster_management.manager.ClusterManager"><span class="pre">cardano_node_tests.cluster_management.manager.ClusterManager</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_mint_negative_raw.py#L31-L51"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_mint_negative_raw.payment_addrs" title="Permalink to this definition"></a></dt>
<dd><p>Create new payment address.</p>
</dd></dl>

</section>
<section id="module-cardano_node_tests.tests.tests_plutus.test_mint_raw">
<span id="cardano-node-tests-tests-tests-plutus-test-mint-raw-module"></span><h2>cardano_node_tests.tests.tests_plutus.test_mint_raw module<a class="headerlink" href="#module-cardano_node_tests.tests.tests_plutus.test_mint_raw" title="Permalink to this headline"></a></h2>
<p>Tests for minting with Plutus using <cite>transaction build-raw</cite>.</p>
<dl class="py class">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_mint_raw.TestCollateralOutput">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">cardano_node_tests.tests.tests_plutus.test_mint_raw.</span></span><span class="sig-name descname"><span class="pre">TestCollateralOutput</span></span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_mint_raw.py#L1301-L1415"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_mint_raw.TestCollateralOutput" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Tests for collateral output.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_mint_raw.TestCollateralOutput.pytestmark">
<span class="sig-name descname"><span class="pre">pytestmark</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">[Mark(name='testnets',</span> <span class="pre">args=(),</span> <span class="pre">kwargs={})]</span></em><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_mint_raw.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_mint_raw.TestCollateralOutput.pytestmark" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_mint_raw.TestCollateralOutput.test_duplicated_collateral">
<span class="sig-name descname"><span class="pre">test_duplicated_collateral</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">payment_addrs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plutus_version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_mint_raw.py#L1305-L1415"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_mint_raw.TestCollateralOutput.test_duplicated_collateral" title="Permalink to this definition"></a></dt>
<dd><p>Test minting a token with a Plutus script while using the same collateral input twice.</p>
<p>Tests <a class="reference external" href="https://github.com/input-output-hk/cardano-node/issues/4744">https://github.com/input-output-hk/cardano-node/issues/4744</a></p>
<ul class="simple">
<li><p>fund the token issuer and create a UTxO for collateral and possibly reference script</p></li>
<li><p>check that the expected amount was transferred to token issuer’s address</p></li>
<li><p>mint the token using a Plutus script and the same collateral UTxO listed twice</p></li>
<li><p>check that the token was minted and collateral UTxO was not spent</p></li>
</ul>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_mint_raw.TestMinting">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">cardano_node_tests.tests.tests_plutus.test_mint_raw.</span></span><span class="sig-name descname"><span class="pre">TestMinting</span></span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_mint_raw.py#L101-L1298"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_mint_raw.TestMinting" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Tests for minting using Plutus smart contracts.</p>
<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_mint_raw.TestMinting.test_minting_context_equivalence">
<span class="sig-name descname"><span class="pre">test_minting_context_equivalence</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">payment_addrs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_mint_raw.py#L996-L1151"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_mint_raw.TestMinting.test_minting_context_equivalence" title="Permalink to this definition"></a></dt>
<dd><p>Test context equivalence while minting a token.</p>
<ul class="simple">
<li><p>fund the token issuer and create a UTxO for collateral</p></li>
<li><p>check that the expected amount was transferred to token issuer’s address</p></li>
<li><p>generate a dummy redeemer and a dummy Tx</p></li>
<li><p>derive the correct redeemer from the dummy Tx</p></li>
<li><p>mint the token using the derived redeemer</p></li>
<li><p>check that the token was minted and collateral UTxO was not spent</p></li>
<li><p>(optional) check transactions in db-sync</p></li>
</ul>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_mint_raw.TestMinting.test_minting_policy_executed_once1">
<span class="sig-name descname"><span class="pre">test_minting_policy_executed_once1</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">payment_addrs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_mint_raw.py#L691-L844"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_mint_raw.TestMinting.test_minting_policy_executed_once1" title="Permalink to this definition"></a></dt>
<dd><p>Test that minting policy is executed only once even when the same policy is used twice.</p>
<p>Test by minting two tokens while using the same Plutus script twice
with two different redeemers.</p>
<p>The Plutus script used in this test takes the expected token name as
redeemer. Even though the redeemer used for minting the first token
doesn’t match the token name, the token gets minted anyway. That’s
because only the last redeemer is used and all the other scripts with
identical minting policy (and corresponding redeemers) are ignored. So
it only matters that the last redeemer matches the last token name.</p>
<ul class="simple">
<li><p>fund the token issuer and create a UTxO for collateral - funds for fees and collateral
are sufficient for just single minting script</p></li>
<li><p>check that the expected amount was transferred to token issuer’s address</p></li>
<li><p>mint the tokens using two identical Plutus scripts and two redeemers, where the first
redeemer value is invalid</p></li>
<li><p>check that the tokens were minted and collateral UTxOs were not spent, i.e. the first
script and its redeemer were ignored</p></li>
<li><p>check transaction view output</p></li>
<li><p>(optional) check transactions in db-sync</p></li>
</ul>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_mint_raw.TestMinting.test_minting_policy_executed_once2">
<span class="sig-name descname"><span class="pre">test_minting_policy_executed_once2</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">payment_addrs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_mint_raw.py#L846-L994"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_mint_raw.TestMinting.test_minting_policy_executed_once2" title="Permalink to this definition"></a></dt>
<dd><p>Test that minting policy is executed only once even when the same policy is used twice.</p>
<p>Test minting two tokens while using one Plutus script and one redeemer.</p>
<p>The Plutus script used in this test takes the expected token name as
redeemer. Even though the redeemer doesn’t match name of the first
token, the token get’s minted anyway. That’s because it is only checked
that the last token name matches the redeemer, and redeemer for the
first token is not needed.</p>
<ul class="simple">
<li><p>fund the token issuer and create a UTxO for collateral</p></li>
<li><p>check that the expected amount was transferred to token issuer’s address</p></li>
<li><p>mint the tokens using a redeemer value that doesn’t match the name of the first token</p></li>
<li><p>check that the tokens were minted and collateral UTxOs were not spent, i.e. redeemer for
the first token was not needed</p></li>
<li><p>check transaction view output</p></li>
<li><p>(optional) check transactions in db-sync</p></li>
</ul>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_mint_raw.TestMinting.test_minting_two_tokens">
<span class="sig-name descname"><span class="pre">test_minting_two_tokens</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">payment_addrs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plutus_version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_mint_raw.py#L104-L232"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_mint_raw.TestMinting.test_minting_two_tokens" title="Permalink to this definition"></a></dt>
<dd><p>Test minting two tokens with a single Plutus script.</p>
<ul class="simple">
<li><p>fund the token issuer and create a UTxO for collateral</p></li>
<li><p>check that the expected amount was transferred to token issuer’s address</p></li>
<li><p>mint the tokens using a Plutus script</p></li>
<li><p>check that the tokens were minted and collateral UTxO was not spent</p></li>
<li><p>(optional) check transactions in db-sync</p></li>
</ul>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_mint_raw.TestMinting.test_time_range_minting">
<span class="sig-name descname"><span class="pre">test_time_range_minting</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">payment_addrs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_mint_raw.py#L362-L471"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_mint_raw.TestMinting.test_time_range_minting" title="Permalink to this definition"></a></dt>
<dd><p>Test minting a token with a time constraints Plutus script.</p>
<ul class="simple">
<li><p>fund the token issuer and create a UTxO for collateral</p></li>
<li><p>check that the expected amount was transferred to token issuer’s address</p></li>
<li><p>mint the token using a Plutus script</p></li>
<li><p>check that the token was minted and collateral UTxO was not spent</p></li>
<li><p>(optional) check transactions in db-sync</p></li>
</ul>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_mint_raw.TestMinting.test_ttl_horizon">
<span class="sig-name descname"><span class="pre">test_ttl_horizon</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">payment_addrs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ttl_offset</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plutus_version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_mint_raw.py#L1153-L1298"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_mint_raw.TestMinting.test_ttl_horizon" title="Permalink to this definition"></a></dt>
<dd><p>Test minting a token with ttl far in the future.</p>
<ul class="simple">
<li><p>fund the token issuer and create a UTxO for collateral</p></li>
<li><p>check that the expected amount was transferred to token issuer’s address</p></li>
<li><p>try to mint a token using a Plutus script when ttl is set far in the future</p></li>
<li><p>check that minting failed because of ‘PastHorizon’ failure when ttl is too far
in the future</p></li>
</ul>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_mint_raw.TestMinting.test_two_scripts_minting">
<span class="sig-name descname"><span class="pre">test_two_scripts_minting</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">payment_addrs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plutus_version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_mint_raw.py#L473-L689"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_mint_raw.TestMinting.test_two_scripts_minting" title="Permalink to this definition"></a></dt>
<dd><p>Test minting two tokens with two different Plutus scripts.</p>
<ul class="simple">
<li><p>fund the token issuer and create a UTxO for collaterals</p></li>
<li><p>check that the expected amount was transferred to token issuer’s address</p></li>
<li><p>mint the tokens using two different Plutus scripts</p></li>
<li><p>check that the tokens were minted and collateral UTxOs were not spent</p></li>
<li><p>check transaction view output</p></li>
<li><p>(optional) check transactions in db-sync</p></li>
</ul>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_mint_raw.TestMinting.test_witness_redeemer">
<span class="sig-name descname"><span class="pre">test_witness_redeemer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">payment_addrs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_mint_raw.py#L234-L360"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_mint_raw.TestMinting.test_witness_redeemer" title="Permalink to this definition"></a></dt>
<dd><p>Test minting a token with a Plutus script.</p>
<ul class="simple">
<li><p>fund the token issuer and create a UTxO for collateral</p></li>
<li><p>check that the expected amount was transferred to token issuer’s address</p></li>
<li><p>mint the token using a Plutus script with required signer</p></li>
<li><p>check that the token was minted and collateral UTxO was not spent</p></li>
<li><p>(optional) check transactions in db-sync</p></li>
</ul>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_mint_raw.payment_addrs">
<span class="sig-prename descclassname"><span class="pre">cardano_node_tests.tests.tests_plutus.test_mint_raw.</span></span><span class="sig-name descname"><span class="pre">payment_addrs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster_manager</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="cardano_node_tests.cluster_management.html#cardano_node_tests.cluster_management.manager.ClusterManager" title="cardano_node_tests.cluster_management.manager.ClusterManager"><span class="pre">cardano_node_tests.cluster_management.manager.ClusterManager</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_mint_raw.py#L32-L52"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_mint_raw.payment_addrs" title="Permalink to this definition"></a></dt>
<dd><p>Create new payment address.</p>
</dd></dl>

</section>
<section id="module-cardano_node_tests.tests.tests_plutus.test_spend_build">
<span id="cardano-node-tests-tests-tests-plutus-test-spend-build-module"></span><h2>cardano_node_tests.tests.tests_plutus.test_spend_build module<a class="headerlink" href="#module-cardano_node_tests.tests.tests_plutus.test_spend_build" title="Permalink to this headline"></a></h2>
<p>Tests for spending with Plutus using <cite>transaction build</cite>.</p>
<dl class="py class">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_build.TestBuildLocking">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">cardano_node_tests.tests.tests_plutus.test_spend_build.</span></span><span class="sig-name descname"><span class="pre">TestBuildLocking</span></span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_build.py#L80-L1065"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_build.TestBuildLocking" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Tests for Tx output locking using Plutus smart contracts and <cite>transaction build</cite>.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_build.TestBuildLocking.pytestmark">
<span class="sig-name descname"><span class="pre">pytestmark</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">[Mark(name='testnets',</span> <span class="pre">args=(),</span> <span class="pre">kwargs={})]</span></em><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_build.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_build.TestBuildLocking.pytestmark" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_build.TestBuildLocking.test_always_fails">
<span class="sig-name descname"><span class="pre">test_always_fails</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">payment_addrs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_build.py#L639-L689"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_build.TestBuildLocking.test_always_fails" title="Permalink to this definition"></a></dt>
<dd><p>Test locking a Tx output with a Plutus script and spending the locked UTxO.</p>
<p>Uses <cite>cardano-cli transaction build</cite> command for building the transactions.</p>
<p>Test with “always fails” script that fails for all datum / redeemer values.</p>
<ul class="simple">
<li><p>create a Tx output with a datum hash at the script address</p></li>
<li><p>check that the expected amount was locked at the script address</p></li>
<li><p>try to spend the locked UTxO</p></li>
<li><p>check that the expected error was raised</p></li>
</ul>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_build.TestBuildLocking.test_collateral_is_txin">
<span class="sig-name descname"><span class="pre">test_collateral_is_txin</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">payment_addrs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plutus_version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_build.py#L956-L1065"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_build.TestBuildLocking.test_collateral_is_txin" title="Permalink to this definition"></a></dt>
<dd><p>Test spending the locked UTxO while using single UTxO for both collateral and Tx input.</p>
<p>Uses <cite>cardano-cli transaction build</cite> command for building the transactions.</p>
<p>Tests bug <a class="reference external" href="https://github.com/input-output-hk/cardano-db-sync/issues/750">https://github.com/input-output-hk/cardano-db-sync/issues/750</a></p>
<ul class="simple">
<li><p>create a Tx output with a datum hash at the script address and a collateral UTxO</p></li>
<li><p>check that the expected amount was locked at the script address</p></li>
<li><p>spend the locked UTxO while using the collateral UTxO both as collateral and as
normal Tx input</p></li>
<li><p>check that the expected amount was spent</p></li>
<li><p>(optional) check transactions in db-sync</p></li>
</ul>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_build.TestBuildLocking.test_context_equivalence">
<span class="sig-name descname"><span class="pre">test_context_equivalence</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pool_users</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.PoolUser</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_build.py#L147-L262"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_build.TestBuildLocking.test_context_equivalence" title="Permalink to this definition"></a></dt>
<dd><p>Test context equivalence while spending a locked UTxO.</p>
<p>Uses <cite>cardano-cli transaction build</cite> command for building the transactions.</p>
<ul class="simple">
<li><p>create a Tx output with a datum hash at the script address</p></li>
<li><p>check that the expected amount was locked at the script address</p></li>
<li><p>generate a dummy redeemer and a dummy Tx</p></li>
<li><p>derive the correct redeemer from the dummy Tx</p></li>
<li><p>spend the locked UTxO using the derived redeemer</p></li>
<li><p>check that the expected amount was spent</p></li>
<li><p>(optional) check transactions in db-sync</p></li>
</ul>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_build.TestBuildLocking.test_guessing_game">
<span class="sig-name descname"><span class="pre">test_guessing_game</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">payment_addrs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">variant</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plutus_version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">embed_datum</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">request</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_pytest.fixtures.FixtureRequest</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_build.py#L264-L370"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_build.TestBuildLocking.test_guessing_game" title="Permalink to this definition"></a></dt>
<dd><p>Test locking a Tx output with a Plutus script and spending the locked UTxO.</p>
<p>Uses <cite>cardano-cli transaction build</cite> command for building the transactions.</p>
<p>Test with “guessing game” scripts that expect specific datum and redeemer value.
Test both typed and untyped redeemer and datum.
Test passing datum and redeemer to <cite>cardano-cli</cite> as value, json file and cbor file.</p>
<ul class="simple">
<li><p>create a Tx output with a datum hash at the script address</p></li>
<li><p>check that the expected amount was locked at the script address</p></li>
<li><p>spend the locked UTxO</p></li>
<li><p>check that the expected amount was spent</p></li>
<li><p>(optional) check transactions in db-sync</p></li>
</ul>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_build.TestBuildLocking.test_partial_spending">
<span class="sig-name descname"><span class="pre">test_partial_spending</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">payment_addrs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plutus_version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_build.py#L835-L954"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_build.TestBuildLocking.test_partial_spending" title="Permalink to this definition"></a></dt>
<dd><p>Test spending part of funds (Lovelace and native tokens) on a locked UTxO.</p>
<p>Uses <cite>cardano-cli transaction build</cite> command for building the transactions.</p>
<ul class="simple">
<li><p>create a Tx output that contains native tokens with a datum hash at the script address</p></li>
<li><p>check that expected amounts of Lovelace and native tokens were locked at the script
address</p></li>
<li><p>spend the locked UTxO and create new locked UTxO with change</p></li>
<li><p>check that the expected amounts of Lovelace and native tokens were spent</p></li>
<li><p>check expected fees</p></li>
<li><p>check expected Plutus cost</p></li>
<li><p>(optional) check transactions in db-sync</p></li>
</ul>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_build.TestBuildLocking.test_script_invalid">
<span class="sig-name descname"><span class="pre">test_script_invalid</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">payment_addrs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_build.py#L691-L756"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_build.TestBuildLocking.test_script_invalid" title="Permalink to this definition"></a></dt>
<dd><p>Test failing script together with the <cite>–script-invalid</cite> argument - collateral is taken.</p>
<p>Uses <cite>cardano-cli transaction build</cite> command for building the transactions.</p>
<p>Test with “always fails” script that fails for all datum / redeemer values.</p>
<ul class="simple">
<li><p>create a Tx output with a datum hash at the script address</p></li>
<li><p>check that the expected amount was locked at the script address</p></li>
<li><p>try to spend the locked UTxO</p></li>
<li><p>check that the amount was not transferred and collateral UTxO was spent</p></li>
</ul>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_build.TestBuildLocking.test_two_scripts_spending">
<span class="sig-name descname"><span class="pre">test_two_scripts_spending</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">payment_addrs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plutus_version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_build.py#L372-L637"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_build.TestBuildLocking.test_two_scripts_spending" title="Permalink to this definition"></a></dt>
<dd><p>Test locking two Tx outputs with two different Plutus scripts in single Tx.</p>
<p>Uses <cite>cardano-cli transaction build</cite> command for building the transactions.</p>
<ul class="simple">
<li><p>create a Tx output with a datum hash at the script address</p></li>
<li><p>check that the expected amount was locked at the script address</p></li>
<li><p>spend the locked UTxO</p></li>
<li><p>check that the expected amount was spent</p></li>
<li><p>check expected fees</p></li>
<li><p>check expected Plutus cost</p></li>
<li><p>(optional) check transactions in db-sync</p></li>
</ul>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_build.TestBuildLocking.test_txout_locking">
<span class="sig-name descname"><span class="pre">test_txout_locking</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">payment_addrs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plutus_version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_build.py#L84-L145"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_build.TestBuildLocking.test_txout_locking" title="Permalink to this definition"></a></dt>
<dd><p>Test locking a Tx output with a Plutus script and spending the locked UTxO.</p>
<p>Uses <cite>cardano-cli transaction build</cite> command for building the transactions.</p>
<p>Corresponds to Exercise 3 for Alonzo Blue.</p>
<ul class="simple">
<li><p>create a Tx output with a datum hash at the script address</p></li>
<li><p>check that the expected amount was locked at the script address</p></li>
<li><p>spend the locked UTxO</p></li>
<li><p>check that the expected amount was spent</p></li>
<li><p>check expected fees</p></li>
<li><p>check expected Plutus cost</p></li>
<li><p>(optional) check transactions in db-sync</p></li>
</ul>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_build.TestBuildLocking.test_txout_token_locking">
<span class="sig-name descname"><span class="pre">test_txout_token_locking</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">payment_addrs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plutus_version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_build.py#L758-L833"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_build.TestBuildLocking.test_txout_token_locking" title="Permalink to this definition"></a></dt>
<dd><p>Test locking a Tx output with a Plutus script and spending the locked UTxO.</p>
<p>Uses <cite>cardano-cli transaction build</cite> command for building the transactions.</p>
<ul class="simple">
<li><p>create a Tx output that contains native tokens with a datum hash at the script address</p></li>
<li><p>check that expected amounts of Lovelace and native tokens were locked at the script
address</p></li>
<li><p>spend the locked UTxO</p></li>
<li><p>check that the expected amounts of Lovelace and native tokens were spent</p></li>
<li><p>check expected fees</p></li>
<li><p>check expected Plutus cost</p></li>
<li><p>(optional) check transactions in db-sync</p></li>
</ul>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_build.payment_addrs">
<span class="sig-prename descclassname"><span class="pre">cardano_node_tests.tests.tests_plutus.test_spend_build.</span></span><span class="sig-name descname"><span class="pre">payment_addrs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster_manager</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="cardano_node_tests.cluster_management.html#cardano_node_tests.cluster_management.manager.ClusterManager" title="cardano_node_tests.cluster_management.manager.ClusterManager"><span class="pre">cardano_node_tests.cluster_management.manager.ClusterManager</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_build.py#L33-L53"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_build.payment_addrs" title="Permalink to this definition"></a></dt>
<dd><p>Create new payment addresses.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_build.pool_users">
<span class="sig-prename descclassname"><span class="pre">cardano_node_tests.tests.tests_plutus.test_spend_build.</span></span><span class="sig-name descname"><span class="pre">pool_users</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster_manager</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="cardano_node_tests.cluster_management.html#cardano_node_tests.cluster_management.manager.ClusterManager" title="cardano_node_tests.cluster_management.manager.ClusterManager"><span class="pre">cardano_node_tests.cluster_management.manager.ClusterManager</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.PoolUser</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_build.py#L56-L77"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_build.pool_users" title="Permalink to this definition"></a></dt>
<dd><p>Create new pool users.</p>
</dd></dl>

</section>
<section id="module-cardano_node_tests.tests.tests_plutus.test_spend_compat_build">
<span id="cardano-node-tests-tests-tests-plutus-test-spend-compat-build-module"></span><h2>cardano_node_tests.tests.tests_plutus.test_spend_compat_build module<a class="headerlink" href="#module-cardano_node_tests.tests.tests_plutus.test_spend_compat_build" title="Permalink to this headline"></a></h2>
<p>Compatibility tests for spending with Plutus using <cite>transaction build</cite>.</p>
<dl class="py class">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_compat_build.TestCompatibility">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">cardano_node_tests.tests.tests_plutus.test_spend_compat_build.</span></span><span class="sig-name descname"><span class="pre">TestCompatibility</span></span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_compat_build.py#L49-L103"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_compat_build.TestCompatibility" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Tests for checking compatibility with previous Tx eras.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_compat_build.TestCompatibility.pytestmark">
<span class="sig-name descname"><span class="pre">pytestmark</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">[Mark(name='testnets',</span> <span class="pre">args=(),</span> <span class="pre">kwargs={})]</span></em><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_compat_build.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_compat_build.TestCompatibility.pytestmark" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_compat_build.TestCompatibility.test_plutusv2_old_tx_era">
<span class="sig-name descname"><span class="pre">test_plutusv2_old_tx_era</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">payment_addrs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_compat_build.py#L53-L103"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_compat_build.TestCompatibility.test_plutusv2_old_tx_era" title="Permalink to this definition"></a></dt>
<dd><p>Test spending a UTxO locked with PlutusV2 script using old Tx era.</p>
<p>Expect failure.</p>
<ul class="simple">
<li><p>try to spend the locked UTxO</p></li>
<li><p>check that the expected error was raised</p></li>
<li><p>(optional) check transactions in db-sync</p></li>
</ul>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_compat_build.payment_addrs">
<span class="sig-prename descclassname"><span class="pre">cardano_node_tests.tests.tests_plutus.test_spend_compat_build.</span></span><span class="sig-name descname"><span class="pre">payment_addrs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster_manager</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="cardano_node_tests.cluster_management.html#cardano_node_tests.cluster_management.manager.ClusterManager" title="cardano_node_tests.cluster_management.manager.ClusterManager"><span class="pre">cardano_node_tests.cluster_management.manager.ClusterManager</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_compat_build.py#L26-L46"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_compat_build.payment_addrs" title="Permalink to this definition"></a></dt>
<dd><p>Create new payment addresses.</p>
</dd></dl>

</section>
<section id="module-cardano_node_tests.tests.tests_plutus.test_spend_compat_raw">
<span id="cardano-node-tests-tests-tests-plutus-test-spend-compat-raw-module"></span><h2>cardano_node_tests.tests.tests_plutus.test_spend_compat_raw module<a class="headerlink" href="#module-cardano_node_tests.tests.tests_plutus.test_spend_compat_raw" title="Permalink to this headline"></a></h2>
<p>Compatibility tests for spending with Plutus using <cite>transaction build-raw</cite>.</p>
<dl class="py class">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_compat_raw.TestCompatibility">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">cardano_node_tests.tests.tests_plutus.test_spend_compat_raw.</span></span><span class="sig-name descname"><span class="pre">TestCompatibility</span></span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_compat_raw.py#L48-L154"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_compat_raw.TestCompatibility" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Tests for checking compatibility with previous Tx eras.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_compat_raw.TestCompatibility.pytestmark">
<span class="sig-name descname"><span class="pre">pytestmark</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">[Mark(name='testnets',</span> <span class="pre">args=(),</span> <span class="pre">kwargs={})]</span></em><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_compat_raw.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_compat_raw.TestCompatibility.pytestmark" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_compat_raw.TestCompatibility.test_plutusv1_old_tx_era">
<span class="sig-name descname"><span class="pre">test_plutusv1_old_tx_era</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">payment_addrs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_compat_raw.py#L104-L154"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_compat_raw.TestCompatibility.test_plutusv1_old_tx_era" title="Permalink to this definition"></a></dt>
<dd><p>Test spending a UTxO locked with PlutusV1 script using old Tx era.</p>
<p>Expect failure.</p>
<ul class="simple">
<li><p>try to spend the locked UTxO</p></li>
<li><p>check that the expected error was raised</p></li>
<li><p>(optional) check transactions in db-sync</p></li>
</ul>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_compat_raw.TestCompatibility.test_plutusv2_old_tx_era">
<span class="sig-name descname"><span class="pre">test_plutusv2_old_tx_era</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">payment_addrs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_compat_raw.py#L52-L102"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_compat_raw.TestCompatibility.test_plutusv2_old_tx_era" title="Permalink to this definition"></a></dt>
<dd><p>Test spending a UTxO locked with PlutusV2 script using old Tx era.</p>
<p>Expect failure.</p>
<ul class="simple">
<li><p>try to spend the locked UTxO</p></li>
<li><p>check that the expected error was raised</p></li>
<li><p>(optional) check transactions in db-sync</p></li>
</ul>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_compat_raw.payment_addrs">
<span class="sig-prename descclassname"><span class="pre">cardano_node_tests.tests.tests_plutus.test_spend_compat_raw.</span></span><span class="sig-name descname"><span class="pre">payment_addrs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster_manager</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="cardano_node_tests.cluster_management.html#cardano_node_tests.cluster_management.manager.ClusterManager" title="cardano_node_tests.cluster_management.manager.ClusterManager"><span class="pre">cardano_node_tests.cluster_management.manager.ClusterManager</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_compat_raw.py#L25-L45"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_compat_raw.payment_addrs" title="Permalink to this definition"></a></dt>
<dd><p>Create new payment addresses.</p>
</dd></dl>

</section>
<section id="module-cardano_node_tests.tests.tests_plutus.test_spend_datum_build">
<span id="cardano-node-tests-tests-tests-plutus-test-spend-datum-build-module"></span><h2>cardano_node_tests.tests.tests_plutus.test_spend_datum_build module<a class="headerlink" href="#module-cardano_node_tests.tests.tests_plutus.test_spend_datum_build" title="Permalink to this headline"></a></h2>
<p>Tests for datum while spending with Plutus using <cite>transaction build</cite>.</p>
<dl class="py class">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_datum_build.TestDatum">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">cardano_node_tests.tests.tests_plutus.test_spend_datum_build.</span></span><span class="sig-name descname"><span class="pre">TestDatum</span></span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_datum_build.py#L56-L163"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_datum_build.TestDatum" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Tests for datum.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_datum_build.TestDatum.pytestmark">
<span class="sig-name descname"><span class="pre">pytestmark</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">[Mark(name='testnets',</span> <span class="pre">args=(),</span> <span class="pre">kwargs={})]</span></em><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_datum_build.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_datum_build.TestDatum.pytestmark" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_datum_build.TestDatum.test_datum_on_key_credential_address">
<span class="sig-name descname"><span class="pre">test_datum_on_key_credential_address</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">payment_addrs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_datum_build.py#L60-L103"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_datum_build.TestDatum.test_datum_on_key_credential_address" title="Permalink to this definition"></a></dt>
<dd><p>Test creating UTxO with datum on address with key credentials (non-script address).</p>
<p>Uses <cite>cardano-cli transaction build</cite> command for building the transactions.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_datum_build.TestDatum.test_embed_datum_without_pparams">
<span class="sig-name descname"><span class="pre">test_embed_datum_without_pparams</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">payment_addrs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plutus_version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_datum_build.py#L105-L163"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_datum_build.TestDatum.test_embed_datum_without_pparams" title="Permalink to this definition"></a></dt>
<dd><p>Test ‘build –tx-out-datum-embed’ without providing protocol params file.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_datum_build.TestNegativeDatum">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">cardano_node_tests.tests.tests_plutus.test_spend_datum_build.</span></span><span class="sig-name descname"><span class="pre">TestNegativeDatum</span></span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_datum_build.py#L166-L525"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_datum_build.TestNegativeDatum" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Tests for Tx output locking using Plutus smart contracts with wrong datum.</p>
<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_datum_build.TestNegativeDatum.pbt_script_addresses">
<span class="sig-name descname"><span class="pre">pbt_script_addresses</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_datum_build.py#L170-L189"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_datum_build.TestNegativeDatum.pbt_script_addresses" title="Permalink to this definition"></a></dt>
<dd><p>Get Plutus script addresses.</p>
<p>Meant for property-based tests, so this expensive operation gets executed only once.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_datum_build.TestNegativeDatum.pytestmark">
<span class="sig-name descname"><span class="pre">pytestmark</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">[Mark(name='testnets',</span> <span class="pre">args=(),</span> <span class="pre">kwargs={})]</span></em><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_datum_build.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_datum_build.TestNegativeDatum.pytestmark" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_datum_build.TestNegativeDatum.test_lock_tx_invalid_datum">
<span class="sig-name descname"><span class="pre">test_lock_tx_invalid_datum</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">payment_addrs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plutus_version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_datum_build.py#L283-L321"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_datum_build.TestNegativeDatum.test_lock_tx_invalid_datum" title="Permalink to this definition"></a></dt>
<dd><p>Test locking a Tx output with an invalid datum.</p>
<p>Expect failure.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_datum_build.TestNegativeDatum.test_no_datum_txout">
<span class="sig-name descname"><span class="pre">test_no_datum_txout</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">payment_addrs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">address_type</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plutus_version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_datum_build.py#L191-L281"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_datum_build.TestNegativeDatum.test_no_datum_txout" title="Permalink to this definition"></a></dt>
<dd><p>Test using UTxO without datum hash in place of locked UTxO.</p>
<p>Expect failure.</p>
<ul class="simple">
<li><p>create a Tx output without a datum hash</p></li>
<li><p>try to spend the UTxO like it was locked Plutus UTxO</p></li>
<li><p>check that the expected error was raised</p></li>
</ul>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_datum_build.TestNegativeDatum.test_too_big">
<span class="sig-name descname"><span class="pre">test_too_big</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">payment_addrs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pbt_script_addresses</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plutus_version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_datum_build.py#L467-L525"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_datum_build.TestNegativeDatum.test_too_big" title="Permalink to this definition"></a></dt>
<dd><p>Try to lock a UTxO with datum that is too big.</p>
<p>Expect failure on node version &lt; 1.36.0.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_datum_build.TestNegativeDatum.test_unlock_non_script_utxo">
<span class="sig-name descname"><span class="pre">test_unlock_non_script_utxo</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">payment_addrs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plutus_version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_datum_build.py#L378-L465"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_datum_build.TestNegativeDatum.test_unlock_non_script_utxo" title="Permalink to this definition"></a></dt>
<dd><p>Try to spend a non-script UTxO with datum as if it was script locked UTxO.</p>
<p>Expect failure.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_datum_build.TestNegativeDatum.test_unlock_tx_wrong_datum">
<span class="sig-name descname"><span class="pre">test_unlock_tx_wrong_datum</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">payment_addrs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plutus_version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_datum_build.py#L323-L376"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_datum_build.TestNegativeDatum.test_unlock_tx_wrong_datum" title="Permalink to this definition"></a></dt>
<dd><p>Test locking a Tx output and try to spend it with a wrong datum.</p>
<p>Expect failure.</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_datum_build.payment_addrs">
<span class="sig-prename descclassname"><span class="pre">cardano_node_tests.tests.tests_plutus.test_spend_datum_build.</span></span><span class="sig-name descname"><span class="pre">payment_addrs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster_manager</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="cardano_node_tests.cluster_management.html#cardano_node_tests.cluster_management.manager.ClusterManager" title="cardano_node_tests.cluster_management.manager.ClusterManager"><span class="pre">cardano_node_tests.cluster_management.manager.ClusterManager</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_datum_build.py#L33-L53"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_datum_build.payment_addrs" title="Permalink to this definition"></a></dt>
<dd><p>Create new payment addresses.</p>
</dd></dl>

</section>
<section id="module-cardano_node_tests.tests.tests_plutus.test_spend_datum_raw">
<span id="cardano-node-tests-tests-tests-plutus-test-spend-datum-raw-module"></span><h2>cardano_node_tests.tests.tests_plutus.test_spend_datum_raw module<a class="headerlink" href="#module-cardano_node_tests.tests.tests_plutus.test_spend_datum_raw" title="Permalink to this headline"></a></h2>
<p>Tests for datum while spending with Plutus using <cite>transaction build-raw</cite>.</p>
<dl class="py class">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_datum_raw.TestDatum">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">cardano_node_tests.tests.tests_plutus.test_spend_datum_raw.</span></span><span class="sig-name descname"><span class="pre">TestDatum</span></span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_datum_raw.py#L54-L92"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_datum_raw.TestDatum" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Tests for datum.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_datum_raw.TestDatum.pytestmark">
<span class="sig-name descname"><span class="pre">pytestmark</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">[Mark(name='testnets',</span> <span class="pre">args=(),</span> <span class="pre">kwargs={})]</span></em><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_datum_raw.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_datum_raw.TestDatum.pytestmark" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_datum_raw.TestDatum.test_datum_on_key_credential_address">
<span class="sig-name descname"><span class="pre">test_datum_on_key_credential_address</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">payment_addrs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_datum_raw.py#L58-L92"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_datum_raw.TestDatum.test_datum_on_key_credential_address" title="Permalink to this definition"></a></dt>
<dd><p>Test creating UTxO with datum on address with key credentials (non-script address).</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_datum_raw.TestNegativeDatum">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">cardano_node_tests.tests.tests_plutus.test_spend_datum_raw.</span></span><span class="sig-name descname"><span class="pre">TestNegativeDatum</span></span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_datum_raw.py#L95-L458"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_datum_raw.TestNegativeDatum" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Tests for Tx output locking using Plutus smart contracts with wrong datum.</p>
<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_datum_raw.TestNegativeDatum.pbt_highest_utxo">
<span class="sig-name descname"><span class="pre">pbt_highest_utxo</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">payment_addrs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">cardano_clusterlib.structs.UTXOData</span></span></span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_datum_raw.py#L99-L109"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_datum_raw.TestNegativeDatum.pbt_highest_utxo" title="Permalink to this definition"></a></dt>
<dd><p>Get UTxO with highest amount of Lovelace.</p>
<p>Meant for property-based tests, so this expensive operation gets executed only once.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_datum_raw.TestNegativeDatum.pbt_script_addresses">
<span class="sig-name descname"><span class="pre">pbt_script_addresses</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_datum_raw.py#L111-L130"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_datum_raw.TestNegativeDatum.pbt_script_addresses" title="Permalink to this definition"></a></dt>
<dd><p>Get Plutus script addresses.</p>
<p>Meant for property-based tests, so this expensive operation gets executed only once.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_datum_raw.TestNegativeDatum.pytestmark">
<span class="sig-name descname"><span class="pre">pytestmark</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">[Mark(name='testnets',</span> <span class="pre">args=(),</span> <span class="pre">kwargs={})]</span></em><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_datum_raw.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_datum_raw.TestNegativeDatum.pytestmark" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_datum_raw.TestNegativeDatum.test_lock_tx_invalid_datum">
<span class="sig-name descname"><span class="pre">test_lock_tx_invalid_datum</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">payment_addrs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plutus_version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_datum_raw.py#L210-L253"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_datum_raw.TestNegativeDatum.test_lock_tx_invalid_datum" title="Permalink to this definition"></a></dt>
<dd><p>Test locking a Tx output with an invalid datum.</p>
<p>Expect failure.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_datum_raw.TestNegativeDatum.test_no_datum_txout">
<span class="sig-name descname"><span class="pre">test_no_datum_txout</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">payment_addrs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">address_type</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plutus_version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_datum_raw.py#L132-L208"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_datum_raw.TestNegativeDatum.test_no_datum_txout" title="Permalink to this definition"></a></dt>
<dd><p>Test using UTxO without datum hash in place of locked UTxO.</p>
<p>Expect failure.</p>
<ul class="simple">
<li><p>create a Tx output without a datum hash</p></li>
<li><p>try to spend the UTxO like it was locked Plutus UTxO</p></li>
<li><p>check that the expected error was raised</p></li>
</ul>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_datum_raw.TestNegativeDatum.test_too_big">
<span class="sig-name descname"><span class="pre">test_too_big</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">payment_addrs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pbt_highest_utxo</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.structs.UTXOData</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pbt_script_addresses</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plutus_version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_datum_raw.py#L399-L458"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_datum_raw.TestNegativeDatum.test_too_big" title="Permalink to this definition"></a></dt>
<dd><p>Try to lock a UTxO with datum that is too big.</p>
<p>Expect failure on node version &lt; 1.36.0.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_datum_raw.TestNegativeDatum.test_unlock_non_script_utxo">
<span class="sig-name descname"><span class="pre">test_unlock_non_script_utxo</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">payment_addrs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plutus_version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_datum_raw.py#L312-L397"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_datum_raw.TestNegativeDatum.test_unlock_non_script_utxo" title="Permalink to this definition"></a></dt>
<dd><p>Try to spend a non-script UTxO with datum as if it was script locked UTxO.</p>
<p>Expect failure.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_datum_raw.TestNegativeDatum.test_unlock_tx_wrong_datum">
<span class="sig-name descname"><span class="pre">test_unlock_tx_wrong_datum</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">payment_addrs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plutus_version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_datum_raw.py#L255-L310"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_datum_raw.TestNegativeDatum.test_unlock_tx_wrong_datum" title="Permalink to this definition"></a></dt>
<dd><p>Test locking a Tx output and try to spend it with a wrong datum.</p>
<p>Expect failure.</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_datum_raw.payment_addrs">
<span class="sig-prename descclassname"><span class="pre">cardano_node_tests.tests.tests_plutus.test_spend_datum_raw.</span></span><span class="sig-name descname"><span class="pre">payment_addrs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster_manager</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="cardano_node_tests.cluster_management.html#cardano_node_tests.cluster_management.manager.ClusterManager" title="cardano_node_tests.cluster_management.manager.ClusterManager"><span class="pre">cardano_node_tests.cluster_management.manager.ClusterManager</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_datum_raw.py#L31-L51"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_datum_raw.payment_addrs" title="Permalink to this definition"></a></dt>
<dd><p>Create new payment addresses.</p>
</dd></dl>

</section>
<section id="module-cardano_node_tests.tests.tests_plutus.test_spend_negative_build">
<span id="cardano-node-tests-tests-tests-plutus-test-spend-negative-build-module"></span><h2>cardano_node_tests.tests.tests_plutus.test_spend_negative_build module<a class="headerlink" href="#module-cardano_node_tests.tests.tests_plutus.test_spend_negative_build" title="Permalink to this headline"></a></h2>
<p>Negative tests for spending with Plutus using <cite>transaction build</cite>.</p>
<dl class="py class">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_negative_build.TestNegative">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">cardano_node_tests.tests.tests_plutus.test_spend_negative_build.</span></span><span class="sig-name descname"><span class="pre">TestNegative</span></span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_negative_build.py#L54-L416"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_negative_build.TestNegative" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Tests for Tx output locking using Plutus smart contracts that are expected to fail.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_negative_build.TestNegative.pytestmark">
<span class="sig-name descname"><span class="pre">pytestmark</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">[Mark(name='testnets',</span> <span class="pre">args=(),</span> <span class="pre">kwargs={})]</span></em><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_negative_build.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_negative_build.TestNegative.pytestmark" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_negative_build.TestNegative.test_collateral_w_tokens">
<span class="sig-name descname"><span class="pre">test_collateral_w_tokens</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">payment_addrs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plutus_version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_negative_build.py#L58-L125"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_negative_build.TestNegative.test_collateral_w_tokens" title="Permalink to this definition"></a></dt>
<dd><p>Test spending the locked UTxO while collateral contains native tokens.</p>
<p>Expect failure.</p>
<p>Uses <cite>cardano-cli transaction build</cite> command for building the transactions.</p>
<ul class="simple">
<li><p>create a collateral UTxO with native tokens</p></li>
<li><p>try to spend the locked UTxO</p></li>
<li><p>check that the expected error was raised</p></li>
<li><p>(optional) check transactions in db-sync</p></li>
</ul>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_negative_build.TestNegative.test_invalid_guessing_game">
<span class="sig-name descname"><span class="pre">test_invalid_guessing_game</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">payment_addrs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">variant</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plutus_version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_negative_build.py#L190-L264"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_negative_build.TestNegative.test_invalid_guessing_game" title="Permalink to this definition"></a></dt>
<dd><p>Test locking a Tx output with a Plutus script and spending the locked UTxO.</p>
<p>Uses <cite>cardano-cli transaction build</cite> command for building the transactions.</p>
<p>Test with “guessing game” script that expects specific datum and redeemer value.
Test negative scenarios where datum or redeemer value is different than expected.
Expect failure.</p>
<ul class="simple">
<li><p>create a Tx output with a datum hash at the script address</p></li>
<li><p>check that the expected amount was locked at the script address</p></li>
<li><p>try to spend the locked UTxO</p></li>
<li><p>check that the amount was not transferred and collateral UTxO was not spent</p></li>
</ul>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_negative_build.TestNegative.test_same_collateral_txin">
<span class="sig-name descname"><span class="pre">test_same_collateral_txin</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">payment_addrs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plutus_version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_negative_build.py#L127-L188"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_negative_build.TestNegative.test_same_collateral_txin" title="Permalink to this definition"></a></dt>
<dd><p>Test spending the locked UTxO while using the same UTxO as collateral.</p>
<p>Expect failure.</p>
<p>Uses <cite>cardano-cli transaction build</cite> command for building the transactions.</p>
<ul class="simple">
<li><p>create a Tx output with a datum hash at the script address</p></li>
<li><p>check that the expected amount was locked at the script address</p></li>
<li><p>try to spend the locked UTxO while using the same UTxO as collateral</p></li>
<li><p>check that the expected error was raised</p></li>
<li><p>(optional) check transactions in db-sync</p></li>
</ul>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_negative_build.TestNegative.test_two_scripts_spending_one_fail">
<span class="sig-name descname"><span class="pre">test_two_scripts_spending_one_fail</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">payment_addrs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plutus_version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_negative_build.py#L266-L416"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_negative_build.TestNegative.test_two_scripts_spending_one_fail" title="Permalink to this definition"></a></dt>
<dd><p>Test locking two Tx outputs with two different Plutus scripts in single Tx, one fails.</p>
<p>Uses <cite>cardano-cli transaction build</cite> command for building the transactions.</p>
<ul class="simple">
<li><p>create a Tx output with a datum hash at the script addresses</p></li>
<li><p>try to spend the locked UTxOs</p></li>
<li><p>check that the expected error was raised</p></li>
</ul>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_negative_build.TestNegativeRedeemer">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">cardano_node_tests.tests.tests_plutus.test_spend_negative_build.</span></span><span class="sig-name descname"><span class="pre">TestNegativeRedeemer</span></span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_negative_build.py#L419-L1160"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_negative_build.TestNegativeRedeemer" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Tests for Tx output locking using Plutus smart contracts with wrong redeemer.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_negative_build.TestNegativeRedeemer.AMOUNT">
<span class="sig-name descname"><span class="pre">AMOUNT</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">2000000</span></em><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_negative_build.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_negative_build.TestNegativeRedeemer.AMOUNT" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_negative_build.TestNegativeRedeemer.MIN_INT_VAL">
<span class="sig-name descname"><span class="pre">MIN_INT_VAL</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">-18446744073709551615</span></em><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_negative_build.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_negative_build.TestNegativeRedeemer.MIN_INT_VAL" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_negative_build.TestNegativeRedeemer.fund_script_guessing_game_v1">
<span class="sig-name descname"><span class="pre">fund_script_guessing_game_v1</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">payment_addrs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_negative_build.py#L426-L452"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_negative_build.TestNegativeRedeemer.fund_script_guessing_game_v1" title="Permalink to this definition"></a></dt>
<dd><p>Fund a PlutusV1 script and create the locked UTxO and collateral UTxO.</p>
<p>Uses <cite>cardano-cli transaction build</cite> command for building the transactions.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_negative_build.TestNegativeRedeemer.fund_script_guessing_game_v2">
<span class="sig-name descname"><span class="pre">fund_script_guessing_game_v2</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">payment_addrs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_negative_build.py#L454-L480"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_negative_build.TestNegativeRedeemer.fund_script_guessing_game_v2" title="Permalink to this definition"></a></dt>
<dd><p>Fund a PlutusV2 script and create the locked UTxO and collateral UTxO.</p>
<p>Uses <cite>cardano-cli transaction build</cite> command for building the transactions.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_negative_build.TestNegativeRedeemer.pytestmark">
<span class="sig-name descname"><span class="pre">pytestmark</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">[Mark(name='testnets',</span> <span class="pre">args=(),</span> <span class="pre">kwargs={})]</span></em><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_negative_build.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_negative_build.TestNegativeRedeemer.pytestmark" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_negative_build.TestNegativeRedeemer.test_invalid_json">
<span class="sig-name descname"><span class="pre">test_invalid_json</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">payment_addrs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fund_script_guessing_game_v1</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fund_script_guessing_game_v2</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plutus_version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_negative_build.py#L996-L1046"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_negative_build.TestNegativeRedeemer.test_invalid_json" title="Permalink to this definition"></a></dt>
<dd><p>Try to build a Tx using a redeemer value that is invalid JSON.</p>
<p>Expect failure.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_negative_build.TestNegativeRedeemer.test_json_schema_typed_bytes_int_declared">
<span class="sig-name descname"><span class="pre">test_json_schema_typed_bytes_int_declared</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">payment_addrs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fund_script_guessing_game_v1</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fund_script_guessing_game_v2</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plutus_version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_negative_build.py#L884-L938"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_negative_build.TestNegativeRedeemer.test_json_schema_typed_bytes_int_declared" title="Permalink to this definition"></a></dt>
<dd><p>Try to build a Tx using int value for redeemer when JSON schema specifies byte string.</p>
<p>Redeemer is in typed format and the value doesn’t comply to JSON schema.
Expect failure.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_negative_build.TestNegativeRedeemer.test_json_schema_typed_int_bytes_declared">
<span class="sig-name descname"><span class="pre">test_json_schema_typed_int_bytes_declared</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">payment_addrs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fund_script_guessing_game_v1</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fund_script_guessing_game_v2</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plutus_version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_negative_build.py#L774-L827"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_negative_build.TestNegativeRedeemer.test_json_schema_typed_int_bytes_declared" title="Permalink to this definition"></a></dt>
<dd><p>Try to build a Tx using byte string for redeemer when JSON schema specifies int.</p>
<p>Redeemer is in typed format and the value doesn’t comply to JSON schema.
Expect failure.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_negative_build.TestNegativeRedeemer.test_json_schema_typed_invalid_type">
<span class="sig-name descname"><span class="pre">test_json_schema_typed_invalid_type</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">payment_addrs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fund_script_guessing_game_v1</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fund_script_guessing_game_v2</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plutus_version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_negative_build.py#L1048-L1103"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_negative_build.TestNegativeRedeemer.test_json_schema_typed_invalid_type" title="Permalink to this definition"></a></dt>
<dd><p>Try to build a Tx using a JSON typed schema that specifies an invalid type.</p>
<p>Expect failure.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_negative_build.TestNegativeRedeemer.test_json_schema_untyped_bytes_int_declared">
<span class="sig-name descname"><span class="pre">test_json_schema_untyped_bytes_int_declared</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">payment_addrs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fund_script_guessing_game_v1</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fund_script_guessing_game_v2</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plutus_version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_negative_build.py#L940-L994"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_negative_build.TestNegativeRedeemer.test_json_schema_untyped_bytes_int_declared" title="Permalink to this definition"></a></dt>
<dd><p>Try to build a Tx using int value for redeemer when JSON schema specifies byte string.</p>
<p>Redeemer is in untyped format and the value doesn’t comply to JSON schema.
Expect failure.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_negative_build.TestNegativeRedeemer.test_json_schema_untyped_int_bytes_declared">
<span class="sig-name descname"><span class="pre">test_json_schema_untyped_int_bytes_declared</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">payment_addrs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fund_script_guessing_game_v1</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fund_script_guessing_game_v2</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plutus_version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_negative_build.py#L829-L882"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_negative_build.TestNegativeRedeemer.test_json_schema_untyped_int_bytes_declared" title="Permalink to this definition"></a></dt>
<dd><p>Try to build a Tx using byte string for redeemer when JSON schema specifies int.</p>
<p>Redeemer is in untyped format and the value doesn’t comply to JSON schema.
Expect failure.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_negative_build.TestNegativeRedeemer.test_json_schema_untyped_invalid_type">
<span class="sig-name descname"><span class="pre">test_json_schema_untyped_invalid_type</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">payment_addrs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fund_script_guessing_game_v1</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fund_script_guessing_game_v2</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plutus_version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_negative_build.py#L1105-L1160"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_negative_build.TestNegativeRedeemer.test_json_schema_untyped_invalid_type" title="Permalink to this definition"></a></dt>
<dd><p>Try to build a Tx using a JSON untyped schema that specifies an invalid type.</p>
<p>Expect failure.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_negative_build.TestNegativeRedeemer.test_too_big">
<span class="sig-name descname"><span class="pre">test_too_big</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">payment_addrs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fund_script_guessing_game_v1</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fund_script_guessing_game_v2</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plutus_version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_negative_build.py#L719-L772"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_negative_build.TestNegativeRedeemer.test_too_big" title="Permalink to this definition"></a></dt>
<dd><p>Try to spend a locked UTxO using redeemer that is too big.</p>
<p>Expect failure.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_negative_build.TestNegativeRedeemer.test_wrong_type">
<span class="sig-name descname"><span class="pre">test_wrong_type</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">payment_addrs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fund_script_guessing_game_v1</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fund_script_guessing_game_v2</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plutus_version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_negative_build.py#L667-L717"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_negative_build.TestNegativeRedeemer.test_wrong_type" title="Permalink to this definition"></a></dt>
<dd><p>Try to spend a locked UTxO with a wrong redeemer type, try to use bytes.</p>
<p>Expect failure.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_negative_build.TestNegativeRedeemer.test_wrong_value_above_range">
<span class="sig-name descname"><span class="pre">test_wrong_value_above_range</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">payment_addrs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fund_script_guessing_game_v1</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fund_script_guessing_game_v2</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plutus_version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_negative_build.py#L595-L629"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_negative_build.TestNegativeRedeemer.test_wrong_value_above_range" title="Permalink to this definition"></a></dt>
<dd><p>Try to spend a locked UTxO with a wrong redeemer value, above max value allowed.</p>
<p>Expect failure.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_negative_build.TestNegativeRedeemer.test_wrong_value_bellow_range">
<span class="sig-name descname"><span class="pre">test_wrong_value_bellow_range</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">payment_addrs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fund_script_guessing_game_v1</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fund_script_guessing_game_v2</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plutus_version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_negative_build.py#L631-L665"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_negative_build.TestNegativeRedeemer.test_wrong_value_bellow_range" title="Permalink to this definition"></a></dt>
<dd><p>Try to spend a locked UTxO with a wrong redeemer value, bellow min value allowed.</p>
<p>Expect failure.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_negative_build.TestNegativeRedeemer.test_wrong_value_inside_range">
<span class="sig-name descname"><span class="pre">test_wrong_value_inside_range</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">payment_addrs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fund_script_guessing_game_v1</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fund_script_guessing_game_v2</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plutus_version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_negative_build.py#L531-L593"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_negative_build.TestNegativeRedeemer.test_wrong_value_inside_range" title="Permalink to this definition"></a></dt>
<dd><p>Try to spend a locked UTxO with a wrong redeemer value that is in the valid range.</p>
<p>Expect failure.</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_negative_build.payment_addrs">
<span class="sig-prename descclassname"><span class="pre">cardano_node_tests.tests.tests_plutus.test_spend_negative_build.</span></span><span class="sig-name descname"><span class="pre">payment_addrs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster_manager</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="cardano_node_tests.cluster_management.html#cardano_node_tests.cluster_management.manager.ClusterManager" title="cardano_node_tests.cluster_management.manager.ClusterManager"><span class="pre">cardano_node_tests.cluster_management.manager.ClusterManager</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_negative_build.py#L31-L51"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_negative_build.payment_addrs" title="Permalink to this definition"></a></dt>
<dd><p>Create new payment addresses.</p>
</dd></dl>

</section>
<section id="module-cardano_node_tests.tests.tests_plutus.test_spend_negative_raw">
<span id="cardano-node-tests-tests-tests-plutus-test-spend-negative-raw-module"></span><h2>cardano_node_tests.tests.tests_plutus.test_spend_negative_raw module<a class="headerlink" href="#module-cardano_node_tests.tests.tests_plutus.test_spend_negative_raw" title="Permalink to this headline"></a></h2>
<p>Negative tests for spending with Plutus using <cite>transaction build-raw</cite>.</p>
<dl class="py class">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_negative_raw.TestNegative">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">cardano_node_tests.tests.tests_plutus.test_spend_negative_raw.</span></span><span class="sig-name descname"><span class="pre">TestNegative</span></span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_negative_raw.py#L61-L569"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_negative_raw.TestNegative" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Tests for Tx output locking using Plutus smart contracts that are expected to fail.</p>
<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_negative_raw.TestNegative.fund_execution_units_above_limit">
<span class="sig-name descname"><span class="pre">fund_execution_units_above_limit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">payment_addrs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">request</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_pytest.fixtures.SubRequest</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="cardano_node_tests.tests.html#cardano_node_tests.tests.plutus_common.PlutusOp" title="cardano_node_tests.tests.plutus_common.PlutusOp"><span class="pre">cardano_node_tests.tests.plutus_common.PlutusOp</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_negative_raw.py#L69-L95"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_negative_raw.TestNegative.fund_execution_units_above_limit" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_negative_raw.TestNegative.pparams">
<span class="sig-name descname"><span class="pre">pparams</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span></span></span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_negative_raw.py#L65-L67"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_negative_raw.TestNegative.pparams" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_negative_raw.TestNegative.pytestmark">
<span class="sig-name descname"><span class="pre">pytestmark</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">[Mark(name='testnets',</span> <span class="pre">args=(),</span> <span class="pre">kwargs={})]</span></em><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_negative_raw.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_negative_raw.TestNegative.pytestmark" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_negative_raw.TestNegative.test_collateral_percent">
<span class="sig-name descname"><span class="pre">test_collateral_percent</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">payment_addrs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plutus_version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_negative_raw.py#L287-L342"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_negative_raw.TestNegative.test_collateral_percent" title="Permalink to this definition"></a></dt>
<dd><p>Try to spend locked UTxO while collateral is less than required.</p>
<p>Expect failure.</p>
<ul class="simple">
<li><p>create a Tx output with a datum hash at the script address</p></li>
<li><p>check that the expected amount was locked at the script address</p></li>
<li><p>create a collateral UTxO with amount of ADA less than required by <cite>collateralPercentage</cite></p></li>
<li><p>try to spend the UTxO</p></li>
<li><p>check that the expected error was raised</p></li>
<li><p>(optional) check transactions in db-sync</p></li>
</ul>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_negative_raw.TestNegative.test_collateral_w_tokens">
<span class="sig-name descname"><span class="pre">test_collateral_w_tokens</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">payment_addrs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plutus_version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_negative_raw.py#L170-L233"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_negative_raw.TestNegative.test_collateral_w_tokens" title="Permalink to this definition"></a></dt>
<dd><p>Test spending the locked UTxO while collateral contains native tokens.</p>
<p>Expect failure.</p>
<ul class="simple">
<li><p>create a collateral UTxO with native tokens</p></li>
<li><p>try to spend the locked UTxO</p></li>
<li><p>check that the expected error was raised</p></li>
<li><p>(optional) check transactions in db-sync</p></li>
</ul>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_negative_raw.TestNegative.test_execution_units_above_limit">
<span class="sig-name descname"><span class="pre">test_execution_units_above_limit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">payment_addrs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fund_execution_units_above_limit</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="cardano_node_tests.tests.html#cardano_node_tests.tests.plutus_common.PlutusOp" title="cardano_node_tests.tests.plutus_common.PlutusOp"><span class="pre">cardano_node_tests.tests.plutus_common.PlutusOp</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pparams</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">request</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_pytest.fixtures.FixtureRequest</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_negative_raw.py#L500-L569"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_negative_raw.TestNegative.test_execution_units_above_limit" title="Permalink to this definition"></a></dt>
<dd><p>Test spending a locked UTxO with a Plutus script with execution units above the limit.</p>
<p>Expect failure.</p>
<ul class="simple">
<li><p>fund the script address and create a UTxO for collateral</p></li>
<li><p>try to spend the locked UTxO when execution units are set above the limits</p></li>
<li><p>check that failed because the execution units were too big</p></li>
</ul>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_negative_raw.TestNegative.test_invalid_guessing_game">
<span class="sig-name descname"><span class="pre">test_invalid_guessing_game</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">payment_addrs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">variant</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plutus_version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_negative_raw.py#L97-L168"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_negative_raw.TestNegative.test_invalid_guessing_game" title="Permalink to this definition"></a></dt>
<dd><p>Test locking a Tx output with a Plutus script and spending the locked UTxO.</p>
<p>Test with “guessing game” script that expects specific datum and redeemer value.
Test negative scenarios where datum or redeemer value is different than expected.
Expect failure.</p>
<ul class="simple">
<li><p>create a Tx output with a datum hash at the script address</p></li>
<li><p>check that the expected amount was locked at the script address</p></li>
<li><p>try to spend the locked UTxO</p></li>
<li><p>check that the amount was not transferred and collateral UTxO was not spent</p></li>
</ul>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_negative_raw.TestNegative.test_same_collateral_txin">
<span class="sig-name descname"><span class="pre">test_same_collateral_txin</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">payment_addrs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plutus_version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_negative_raw.py#L235-L285"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_negative_raw.TestNegative.test_same_collateral_txin" title="Permalink to this definition"></a></dt>
<dd><p>Test spending the locked UTxO while using the same UTxO as collateral.</p>
<p>Expect failure.</p>
<ul class="simple">
<li><p>create a Tx output with a datum hash at the script address</p></li>
<li><p>check that the expected amount was locked at the script address</p></li>
<li><p>try to spend the locked UTxO while using the same UTxO as collateral</p></li>
<li><p>check that the expected error was raised</p></li>
<li><p>(optional) check transactions in db-sync</p></li>
</ul>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_negative_raw.TestNegative.test_two_scripts_spending_one_fail">
<span class="sig-name descname"><span class="pre">test_two_scripts_spending_one_fail</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">payment_addrs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plutus_version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_negative_raw.py#L344-L498"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_negative_raw.TestNegative.test_two_scripts_spending_one_fail" title="Permalink to this definition"></a></dt>
<dd><p>Test locking two Tx outputs with two different Plutus scripts in single Tx, one fails.</p>
<p>Expect failure.</p>
<ul class="simple">
<li><p>create a Tx output with a datum hash at the script addresses</p></li>
<li><p>try to spend the locked UTxOs</p></li>
<li><p>check that the expected error was raised</p></li>
</ul>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_negative_raw.TestNegativeRedeemer">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">cardano_node_tests.tests.tests_plutus.test_spend_negative_raw.</span></span><span class="sig-name descname"><span class="pre">TestNegativeRedeemer</span></span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_negative_raw.py#L572-L1393"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_negative_raw.TestNegativeRedeemer" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Tests for Tx output locking using Plutus smart contracts with wrong redeemer.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_negative_raw.TestNegativeRedeemer.AMOUNT">
<span class="sig-name descname"><span class="pre">AMOUNT</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">2000000</span></em><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_negative_raw.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_negative_raw.TestNegativeRedeemer.AMOUNT" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_negative_raw.TestNegativeRedeemer.MIN_INT_VAL">
<span class="sig-name descname"><span class="pre">MIN_INT_VAL</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">-18446744073709551615</span></em><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_negative_raw.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_negative_raw.TestNegativeRedeemer.MIN_INT_VAL" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_negative_raw.TestNegativeRedeemer.cost_per_unit">
<span class="sig-name descname"><span class="pre">cost_per_unit</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="cardano_node_tests.tests.html#cardano_node_tests.tests.plutus_common.ExecutionCost" title="cardano_node_tests.tests.plutus_common.ExecutionCost"><span class="pre">cardano_node_tests.tests.plutus_common.ExecutionCost</span></a></span></span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_negative_raw.py#L661-L668"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_negative_raw.TestNegativeRedeemer.cost_per_unit" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_negative_raw.TestNegativeRedeemer.fund_script_guessing_game_v1">
<span class="sig-name descname"><span class="pre">fund_script_guessing_game_v1</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster_manager</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="cardano_node_tests.cluster_management.html#cardano_node_tests.cluster_management.manager.ClusterManager" title="cardano_node_tests.cluster_management.manager.ClusterManager"><span class="pre">cardano_node_tests.cluster_management.manager.ClusterManager</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_negative_raw.py#L617-L637"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_negative_raw.TestNegativeRedeemer.fund_script_guessing_game_v1" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_negative_raw.TestNegativeRedeemer.fund_script_guessing_game_v2">
<span class="sig-name descname"><span class="pre">fund_script_guessing_game_v2</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster_manager</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="cardano_node_tests.cluster_management.html#cardano_node_tests.cluster_management.manager.ClusterManager" title="cardano_node_tests.cluster_management.manager.ClusterManager"><span class="pre">cardano_node_tests.cluster_management.manager.ClusterManager</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_negative_raw.py#L639-L659"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_negative_raw.TestNegativeRedeemer.fund_script_guessing_game_v2" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_negative_raw.TestNegativeRedeemer.pytestmark">
<span class="sig-name descname"><span class="pre">pytestmark</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">[Mark(name='testnets',</span> <span class="pre">args=(),</span> <span class="pre">kwargs={})]</span></em><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_negative_raw.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_negative_raw.TestNegativeRedeemer.pytestmark" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_negative_raw.TestNegativeRedeemer.test_invalid_json">
<span class="sig-name descname"><span class="pre">test_invalid_json</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fund_script_guessing_game_v1</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fund_script_guessing_game_v2</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cost_per_unit</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="cardano_node_tests.tests.html#cardano_node_tests.tests.plutus_common.ExecutionCost" title="cardano_node_tests.tests.plutus_common.ExecutionCost"><span class="pre">cardano_node_tests.tests.plutus_common.ExecutionCost</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">plutus_version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_negative_raw.py#L1266-L1303"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_negative_raw.TestNegativeRedeemer.test_invalid_json" title="Permalink to this definition"></a></dt>
<dd><p>Try to build a Tx using a redeemer value that is invalid JSON.</p>
<p>Expect failure.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_negative_raw.TestNegativeRedeemer.test_json_schema_typed_bytes_int_declared">
<span class="sig-name descname"><span class="pre">test_json_schema_typed_bytes_int_declared</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fund_script_guessing_game_v1</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fund_script_guessing_game_v2</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cost_per_unit</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="cardano_node_tests.tests.html#cardano_node_tests.tests.plutus_common.ExecutionCost" title="cardano_node_tests.tests.plutus_common.ExecutionCost"><span class="pre">cardano_node_tests.tests.plutus_common.ExecutionCost</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">plutus_version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_negative_raw.py#L1188-L1225"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_negative_raw.TestNegativeRedeemer.test_json_schema_typed_bytes_int_declared" title="Permalink to this definition"></a></dt>
<dd><p>Try to build a Tx using int value for redeemer when JSON schema specifies byte string.</p>
<p>Redeemer is in typed format and the value doesn’t comply to JSON schema. Expect failure.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_negative_raw.TestNegativeRedeemer.test_json_schema_typed_int_bytes_declared">
<span class="sig-name descname"><span class="pre">test_json_schema_typed_int_bytes_declared</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fund_script_guessing_game_v1</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fund_script_guessing_game_v2</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cost_per_unit</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="cardano_node_tests.tests.html#cardano_node_tests.tests.plutus_common.ExecutionCost" title="cardano_node_tests.tests.plutus_common.ExecutionCost"><span class="pre">cardano_node_tests.tests.plutus_common.ExecutionCost</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">plutus_version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_negative_raw.py#L1109-L1147"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_negative_raw.TestNegativeRedeemer.test_json_schema_typed_int_bytes_declared" title="Permalink to this definition"></a></dt>
<dd><p>Try to build a Tx using byte string for redeemer when JSON schema specifies int.</p>
<p>Redeemer is in typed format and the value doesn’t comply to JSON schema. Expect failure.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_negative_raw.TestNegativeRedeemer.test_json_schema_typed_invalid_type">
<span class="sig-name descname"><span class="pre">test_json_schema_typed_invalid_type</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fund_script_guessing_game_v1</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fund_script_guessing_game_v2</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cost_per_unit</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="cardano_node_tests.tests.html#cardano_node_tests.tests.plutus_common.ExecutionCost" title="cardano_node_tests.tests.plutus_common.ExecutionCost"><span class="pre">cardano_node_tests.tests.plutus_common.ExecutionCost</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">plutus_version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_negative_raw.py#L1305-L1348"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_negative_raw.TestNegativeRedeemer.test_json_schema_typed_invalid_type" title="Permalink to this definition"></a></dt>
<dd><p>Try to build a Tx using a JSON typed schema that specifies an invalid type.</p>
<p>Expect failure.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_negative_raw.TestNegativeRedeemer.test_json_schema_untyped_bytes_int_declared">
<span class="sig-name descname"><span class="pre">test_json_schema_untyped_bytes_int_declared</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fund_script_guessing_game_v1</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fund_script_guessing_game_v2</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cost_per_unit</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="cardano_node_tests.tests.html#cardano_node_tests.tests.plutus_common.ExecutionCost" title="cardano_node_tests.tests.plutus_common.ExecutionCost"><span class="pre">cardano_node_tests.tests.plutus_common.ExecutionCost</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">plutus_version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_negative_raw.py#L1227-L1264"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_negative_raw.TestNegativeRedeemer.test_json_schema_untyped_bytes_int_declared" title="Permalink to this definition"></a></dt>
<dd><p>Try to build a Tx using int value for redeemer when JSON schema specifies byte string.</p>
<p>Redeemer is in untyped format and the value doesn’t comply to JSON schema. Expect failure.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_negative_raw.TestNegativeRedeemer.test_json_schema_untyped_int_bytes_declared">
<span class="sig-name descname"><span class="pre">test_json_schema_untyped_int_bytes_declared</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fund_script_guessing_game_v1</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fund_script_guessing_game_v2</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cost_per_unit</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="cardano_node_tests.tests.html#cardano_node_tests.tests.plutus_common.ExecutionCost" title="cardano_node_tests.tests.plutus_common.ExecutionCost"><span class="pre">cardano_node_tests.tests.plutus_common.ExecutionCost</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">plutus_version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_negative_raw.py#L1149-L1186"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_negative_raw.TestNegativeRedeemer.test_json_schema_untyped_int_bytes_declared" title="Permalink to this definition"></a></dt>
<dd><p>Try to build a Tx using byte string for redeemer when JSON schema specifies int.</p>
<p>Redeemer is in untyped format and the value doesn’t comply to JSON schema. Expect failure.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_negative_raw.TestNegativeRedeemer.test_json_schema_untyped_invalid_type">
<span class="sig-name descname"><span class="pre">test_json_schema_untyped_invalid_type</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fund_script_guessing_game_v1</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fund_script_guessing_game_v2</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cost_per_unit</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="cardano_node_tests.tests.html#cardano_node_tests.tests.plutus_common.ExecutionCost" title="cardano_node_tests.tests.plutus_common.ExecutionCost"><span class="pre">cardano_node_tests.tests.plutus_common.ExecutionCost</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">plutus_version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_negative_raw.py#L1350-L1393"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_negative_raw.TestNegativeRedeemer.test_json_schema_untyped_invalid_type" title="Permalink to this definition"></a></dt>
<dd><p>Try to build a Tx using a JSON untyped schema that specifies an invalid type.</p>
<p>Expect failure.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_negative_raw.TestNegativeRedeemer.test_too_big">
<span class="sig-name descname"><span class="pre">test_too_big</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fund_script_guessing_game_v1</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fund_script_guessing_game_v2</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cost_per_unit</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="cardano_node_tests.tests.html#cardano_node_tests.tests.plutus_common.ExecutionCost" title="cardano_node_tests.tests.plutus_common.ExecutionCost"><span class="pre">cardano_node_tests.tests.plutus_common.ExecutionCost</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">plutus_version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_negative_raw.py#L1033-L1107"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_negative_raw.TestNegativeRedeemer.test_too_big" title="Permalink to this definition"></a></dt>
<dd><p>Try to spend a locked UTxO using redeemer that is too big.</p>
<p>Expect failure on node version &lt; 1.36.0.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_negative_raw.TestNegativeRedeemer.test_wrong_type">
<span class="sig-name descname"><span class="pre">test_wrong_type</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fund_script_guessing_game_v1</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fund_script_guessing_game_v2</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cost_per_unit</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="cardano_node_tests.tests.html#cardano_node_tests.tests.plutus_common.ExecutionCost" title="cardano_node_tests.tests.plutus_common.ExecutionCost"><span class="pre">cardano_node_tests.tests.plutus_common.ExecutionCost</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">plutus_version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_negative_raw.py#L956-L1031"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_negative_raw.TestNegativeRedeemer.test_wrong_type" title="Permalink to this definition"></a></dt>
<dd><p>Try to spend a locked UTxO with an invalid redeemer type.</p>
<p>Expect failure.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_negative_raw.TestNegativeRedeemer.test_wrong_value_above_range">
<span class="sig-name descname"><span class="pre">test_wrong_value_above_range</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fund_script_guessing_game_v1</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fund_script_guessing_game_v2</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cost_per_unit</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="cardano_node_tests.tests.html#cardano_node_tests.tests.plutus_common.ExecutionCost" title="cardano_node_tests.tests.plutus_common.ExecutionCost"><span class="pre">cardano_node_tests.tests.plutus_common.ExecutionCost</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">plutus_version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_negative_raw.py#L913-L954"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_negative_raw.TestNegativeRedeemer.test_wrong_value_above_range" title="Permalink to this definition"></a></dt>
<dd><p>Try to spend a locked UTxO with a redeemer int value &gt; maximum allowed value.</p>
<p>Expect failure on node version &lt; 1.36.0.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_negative_raw.TestNegativeRedeemer.test_wrong_value_bellow_range">
<span class="sig-name descname"><span class="pre">test_wrong_value_bellow_range</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fund_script_guessing_game_v1</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fund_script_guessing_game_v2</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cost_per_unit</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="cardano_node_tests.tests.html#cardano_node_tests.tests.plutus_common.ExecutionCost" title="cardano_node_tests.tests.plutus_common.ExecutionCost"><span class="pre">cardano_node_tests.tests.plutus_common.ExecutionCost</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">plutus_version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_negative_raw.py#L870-L911"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_negative_raw.TestNegativeRedeemer.test_wrong_value_bellow_range" title="Permalink to this definition"></a></dt>
<dd><p>Try to spend a locked UTxO with a redeemer int value &lt; minimum allowed value.</p>
<p>Expect failure on node version &lt; 1.36.0.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_negative_raw.TestNegativeRedeemer.test_wrong_value_inside_range">
<span class="sig-name descname"><span class="pre">test_wrong_value_inside_range</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fund_script_guessing_game_v1</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fund_script_guessing_game_v2</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.UTXOData</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cost_per_unit</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="cardano_node_tests.tests.html#cardano_node_tests.tests.plutus_common.ExecutionCost" title="cardano_node_tests.tests.plutus_common.ExecutionCost"><span class="pre">cardano_node_tests.tests.plutus_common.ExecutionCost</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">plutus_version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span></span></span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_negative_raw.py#L782-L868"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_negative_raw.TestNegativeRedeemer.test_wrong_value_inside_range" title="Permalink to this definition"></a></dt>
<dd><p>Try to spend a locked UTxO with an unexpected redeemer value.</p>
<p>Expect failure.</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_negative_raw.payment_addrs">
<span class="sig-prename descclassname"><span class="pre">cardano_node_tests.tests.tests_plutus.test_spend_negative_raw.</span></span><span class="sig-name descname"><span class="pre">payment_addrs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster_manager</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="cardano_node_tests.cluster_management.html#cardano_node_tests.cluster_management.manager.ClusterManager" title="cardano_node_tests.cluster_management.manager.ClusterManager"><span class="pre">cardano_node_tests.cluster_management.manager.ClusterManager</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_negative_raw.py#L38-L58"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_negative_raw.payment_addrs" title="Permalink to this definition"></a></dt>
<dd><p>Create new payment addresses.</p>
</dd></dl>

</section>
<section id="module-cardano_node_tests.tests.tests_plutus.test_spend_raw">
<span id="cardano-node-tests-tests-tests-plutus-test-spend-raw-module"></span><h2>cardano_node_tests.tests.tests_plutus.test_spend_raw module<a class="headerlink" href="#module-cardano_node_tests.tests.tests_plutus.test_spend_raw" title="Permalink to this headline"></a></h2>
<p>Tests for spending with Plutus using <cite>transaction build-raw</cite>.</p>
<dl class="py class">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_raw.TestLocking">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">cardano_node_tests.tests.tests_plutus.test_spend_raw.</span></span><span class="sig-name descname"><span class="pre">TestLocking</span></span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_raw.py#L130-L1009"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_raw.TestLocking" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Tests for Tx output locking using Plutus smart contracts.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_raw.TestLocking.pytestmark">
<span class="sig-name descname"><span class="pre">pytestmark</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">[Mark(name='testnets',</span> <span class="pre">args=(),</span> <span class="pre">kwargs={})]</span></em><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_raw.py"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_raw.TestLocking.pytestmark" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_raw.TestLocking.test_always_fails">
<span class="sig-name descname"><span class="pre">test_always_fails</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">payment_addrs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">worker_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_raw.py#L632-L687"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_raw.TestLocking.test_always_fails" title="Permalink to this definition"></a></dt>
<dd><p>Test locking a Tx output with a Plutus script and spending the locked UTxO.</p>
<p>Test with “always fails” script that fails for all datum / redeemer values.</p>
<ul class="simple">
<li><p>create a Tx output with a datum hash at the script address</p></li>
<li><p>check that the expected amount was locked at the script address</p></li>
<li><p>try to spend the locked UTxO</p></li>
<li><p>check that the amount was not transferred, collateral UTxO was not spent
and the expected error was raised</p></li>
</ul>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_raw.TestLocking.test_collaterals">
<span class="sig-name descname"><span class="pre">test_collaterals</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">payment_addrs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scenario</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plutus_version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_raw.py#L896-L1009"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_raw.TestLocking.test_collaterals" title="Permalink to this definition"></a></dt>
<dd><p>Test dividing required collateral amount into multiple collateral UTxOs.</p>
<p>Test 3 scenarios:
1. maximum allowed number of collateral inputs
2. more collateral inputs than what is allowed
3. no collateral input</p>
<ul class="simple">
<li><p>create a Tx output with a datum hash at the script address</p></li>
<li><p>check that the expected amount was locked at the script address</p></li>
<li><p>create multiple UTxOs for collateral</p></li>
<li><p>spend the locked UTxO</p></li>
<li><p>check that the expected amount was spent when success is expected</p></li>
<li><p>OR check that the amount was not transferred and collateral UTxO was not spent
when failure is expected</p></li>
<li><p>(optional) check transactions in db-sync</p></li>
</ul>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_raw.TestLocking.test_context_equivalence">
<span class="sig-name descname"><span class="pre">test_context_equivalence</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pool_users</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.PoolUser</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_raw.py#L187-L293"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_raw.TestLocking.test_context_equivalence" title="Permalink to this definition"></a></dt>
<dd><p>Test context equivalence while spending a locked UTxO.</p>
<ul class="simple">
<li><p>create a Tx output with a datum hash at the script address</p></li>
<li><p>check that the expected amount was locked at the script address</p></li>
<li><p>generate a dummy redeemer and a dummy Tx</p></li>
<li><p>derive the correct redeemer from the dummy Tx</p></li>
<li><p>spend the locked UTxO using the derived redeemer</p></li>
<li><p>check that the expected amount was spent</p></li>
<li><p>(optional) check transactions in db-sync</p></li>
</ul>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_raw.TestLocking.test_guessing_game">
<span class="sig-name descname"><span class="pre">test_guessing_game</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">payment_addrs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">request</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">_pytest.fixtures.FixtureRequest</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">embed_datum</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">variant</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plutus_version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_raw.py#L295-L395"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_raw.TestLocking.test_guessing_game" title="Permalink to this definition"></a></dt>
<dd><p>Test locking a Tx output with a Plutus script and spending the locked UTxO.</p>
<p>Test with “guessing game” scripts that expect specific datum and redeemer value.
Test both typed and untyped redeemer and datum.
Test passing datum and redeemer to <cite>cardano-cli</cite> as value, json file and cbor file.</p>
<ul class="simple">
<li><p>create a Tx output with a datum hash at the script address</p></li>
<li><p>check that the expected amount was locked at the script address</p></li>
<li><p>spend the locked UTxO</p></li>
<li><p>check that the expected amount was spent</p></li>
<li><p>(optional) check transactions in db-sync</p></li>
</ul>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_raw.TestLocking.test_partial_spending">
<span class="sig-name descname"><span class="pre">test_partial_spending</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">payment_addrs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plutus_version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_raw.py#L807-L894"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_raw.TestLocking.test_partial_spending" title="Permalink to this definition"></a></dt>
<dd><p>Test spending part of funds (Lovelace and native tokens) on a locked UTxO.</p>
<ul class="simple">
<li><p>create a Tx output that contains native tokens with a datum hash at the script address</p></li>
<li><p>check that expected amounts of Lovelace and native tokens were locked at the script
address</p></li>
<li><p>spend the locked UTxO and create new locked UTxO with change</p></li>
<li><p>check that the expected amounts of Lovelace and native tokens were spent</p></li>
<li><p>(optional) check transactions in db-sync</p></li>
</ul>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_raw.TestLocking.test_script_invalid">
<span class="sig-name descname"><span class="pre">test_script_invalid</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">payment_addrs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_raw.py#L689-L744"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_raw.TestLocking.test_script_invalid" title="Permalink to this definition"></a></dt>
<dd><p>Test failing script together with the <cite>–script-invalid</cite> argument - collateral is taken.</p>
<p>Test with “always fails” script that fails for all datum / redeemer values.</p>
<ul class="simple">
<li><p>create a Tx output with a datum hash at the script address</p></li>
<li><p>check that the expected amount was locked at the script address</p></li>
<li><p>try to spend the locked UTxO</p></li>
<li><p>check that the amount was not transferred and collateral UTxO was spent</p></li>
</ul>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_raw.TestLocking.test_two_scripts_spending">
<span class="sig-name descname"><span class="pre">test_two_scripts_spending</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">payment_addrs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plutus_version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_raw.py#L397-L630"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_raw.TestLocking.test_two_scripts_spending" title="Permalink to this definition"></a></dt>
<dd><p>Test locking two Tx outputs with two different Plutus scripts in single Tx.</p>
<ul class="simple">
<li><p>create a Tx output with a datum hash at the script address</p></li>
<li><p>check that the expected amount was locked at the script address</p></li>
<li><p>spend the locked UTxO</p></li>
<li><p>check that the expected amount was spent</p></li>
<li><p>(optional) check transactions in db-sync</p></li>
</ul>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_raw.TestLocking.test_txout_locking">
<span class="sig-name descname"><span class="pre">test_txout_locking</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">payment_addrs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plutus_version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_raw.py#L134-L185"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_raw.TestLocking.test_txout_locking" title="Permalink to this definition"></a></dt>
<dd><p>Test locking a Tx output with a Plutus script and spending the locked UTxO.</p>
<p>Corresponds to Exercise 3 for Alonzo Blue.</p>
<ul class="simple">
<li><p>create a Tx output with a datum hash at the script address</p></li>
<li><p>check that the expected amount was locked at the script address</p></li>
<li><p>spend the locked UTxO</p></li>
<li><p>check that the expected amount was spent</p></li>
<li><p>(optional) check transactions in db-sync</p></li>
</ul>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_raw.TestLocking.test_txout_token_locking">
<span class="sig-name descname"><span class="pre">test_txout_token_locking</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">payment_addrs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plutus_version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_raw.py#L746-L805"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_raw.TestLocking.test_txout_token_locking" title="Permalink to this definition"></a></dt>
<dd><p>Test locking a Tx output with native tokens and spending the locked UTxO.</p>
<ul class="simple">
<li><p>create a Tx output that contains native tokens with a datum hash at the script address</p></li>
<li><p>check that expected amounts of Lovelace and native tokens were locked at the script
address</p></li>
<li><p>spend the locked UTxO</p></li>
<li><p>check that the expected amounts of Lovelace and native tokens were spent</p></li>
<li><p>(optional) check transactions in db-sync</p></li>
</ul>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_raw.payment_addrs">
<span class="sig-prename descclassname"><span class="pre">cardano_node_tests.tests.tests_plutus.test_spend_raw.</span></span><span class="sig-name descname"><span class="pre">payment_addrs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster_manager</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="cardano_node_tests.cluster_management.html#cardano_node_tests.cluster_management.manager.ClusterManager" title="cardano_node_tests.cluster_management.manager.ClusterManager"><span class="pre">cardano_node_tests.cluster_management.manager.ClusterManager</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.AddressRecord</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_raw.py#L37-L57"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_raw.payment_addrs" title="Permalink to this definition"></a></dt>
<dd><p>Create new payment addresses.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="cardano_node_tests.tests.tests_plutus.test_spend_raw.pool_users">
<span class="sig-prename descclassname"><span class="pre">cardano_node_tests.tests.tests_plutus.test_spend_raw.</span></span><span class="sig-name descname"><span class="pre">pool_users</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cluster_manager</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="cardano_node_tests.cluster_management.html#cardano_node_tests.cluster_management.manager.ClusterManager" title="cardano_node_tests.cluster_management.manager.ClusterManager"><span class="pre">cardano_node_tests.cluster_management.manager.ClusterManager</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">cluster</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">cardano_clusterlib.clusterlib_klass.ClusterLib</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">cardano_clusterlib.structs.PoolUser</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/6519d944061988da95e0ac541e9980be2cd02237/cardano_node_tests/tests/tests_plutus/test_spend_raw.py#L60-L81"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#cardano_node_tests.tests.tests_plutus.test_spend_raw.pool_users" title="Permalink to this definition"></a></dt>
<dd><p>Create new pool users.</p>
</dd></dl>

</section>
<section id="module-cardano_node_tests.tests.tests_plutus">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-cardano_node_tests.tests.tests_plutus" title="Permalink to this headline"></a></h2>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="cardano_node_tests.tests.html" class="btn btn-neutral float-left" title="cardano_node_tests.tests package" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="cardano_node_tests.tests.tests_plutus_v2.html" class="btn btn-neutral float-right" title="cardano_node_tests.tests.tests_plutus_v2 package" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright .</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>