<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>README for cardano-node-tests &mdash; cardano-node-tests  documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/copyright.css" type="text/css" />
    <link rel="shortcut icon" href="https://user-images.githubusercontent.com/2352619/223086153-522289f3-9902-4f63-ad7b-a7d9c5789db0.png"/>
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Test Results" href="test_results.html" />
    <link rel="prev" title="Welcome to Cardano node tests documentation!" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            cardano-node-tests
              <img src="_static/Cardano-Crypto-Logo-128.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">README for cardano-node-tests</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#running-tests-using-github-actions">Running tests using Github Actions</a></li>
<li class="toctree-l2"><a class="reference internal" href="#running-tests-using-nix">Running tests using Nix</a></li>
<li class="toctree-l2"><a class="reference internal" href="#variables-for-configuring-testrun">Variables for configuring testrun</a></li>
<li class="toctree-l2"><a class="reference internal" href="#local-installation-e-g-for-tests-development">Local installation (e.g. for tests development)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#local-usage">Local usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="#tests-development">Tests development</a></li>
<li class="toctree-l2"><a class="reference internal" href="#test-coverage-of-cardano-cli-commands">Test coverage of Cardano CLI commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="#building-documentation">Building documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#contributing">Contributing</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="test_results.html">Test Results</a><ul>
<li class="toctree-l2"><a class="reference internal" href="test_results/nightly_system_tests.html">Nightly system tests pipelines</a><ul>
<li class="toctree-l3"><a class="reference internal" href="test_results/nightly_system_tests.html#test-statuses">Test statuses</a></li>
<li class="toctree-l3"><a class="reference internal" href="test_results/nightly_system_tests.html#nightly-results">Nightly results</a><ul>
<li class="toctree-l4"><a class="reference internal" href="test_results/nightly_system_tests.html#nightly-upgrade-testing">Nightly upgrade testing</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="test_results/sync_tests.html">Sync tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="test_results/tag_tests.html">Tag Testing</a><ul>
<li class="toctree-l3"><a class="reference internal" href="test_results/node/tag_1_35_7.html">1.35.7</a><ul>
<li class="toctree-l4"><a class="reference internal" href="test_results/node/tag_1_35_7.html#changelogs">Changelogs</a></li>
<li class="toctree-l4"><a class="reference internal" href="test_results/node/tag_1_35_7.html#regression-testing-on-a-local-cluster">Regression testing on a local cluster</a></li>
<li class="toctree-l4"><a class="reference internal" href="test_results/node/tag_1_35_7.html#release-testing-checklist">Release testing checklist</a></li>
<li class="toctree-l4"><a class="reference internal" href="test_results/node/tag_1_35_7.html#new-functionalities-in-this-tag">New functionalities in this tag</a></li>
<li class="toctree-l4"><a class="reference internal" href="test_results/node/tag_1_35_7.html#new-issues">New issues</a></li>
<li class="toctree-l4"><a class="reference internal" href="test_results/node/tag_1_35_7.html#breaking-changes">Breaking changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="test_results/node/tag_1_35_7.html#component-level-test-tracking">Component Level Test Tracking</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="test_results/node/tag_1_35_6.html">1.35.6</a><ul>
<li class="toctree-l4"><a class="reference internal" href="test_results/node/tag_1_35_6.html#changelogs">Changelogs</a></li>
<li class="toctree-l4"><a class="reference internal" href="test_results/node/tag_1_35_6.html#regression-testing-on-a-local-cluster">Regression testing on a local cluster</a></li>
<li class="toctree-l4"><a class="reference internal" href="test_results/node/tag_1_35_6.html#release-testing-checklist">Release testing checklist</a></li>
<li class="toctree-l4"><a class="reference internal" href="test_results/node/tag_1_35_6.html#new-functionalities-in-this-tag">New functionalities in this tag</a></li>
<li class="toctree-l4"><a class="reference internal" href="test_results/node/tag_1_35_6.html#new-issues">New issues</a></li>
<li class="toctree-l4"><a class="reference internal" href="test_results/node/tag_1_35_6.html#breaking-changes">Breaking changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="test_results/node/tag_1_35_6.html#component-level-test-tracking">Component Level Test Tracking</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="test_results/node/tag_1_35_5.html">1.35.5</a><ul>
<li class="toctree-l4"><a class="reference internal" href="test_results/node/tag_1_35_5.html#changelogs">Changelogs</a></li>
<li class="toctree-l4"><a class="reference internal" href="test_results/node/tag_1_35_5.html#regression-testing-on-a-local-cluster">Regression testing on a local cluster</a></li>
<li class="toctree-l4"><a class="reference internal" href="test_results/node/tag_1_35_5.html#release-testing-checklist">Release testing checklist</a></li>
<li class="toctree-l4"><a class="reference internal" href="test_results/node/tag_1_35_5.html#new-functionalities-in-this-tag">New functionalities in this tag</a></li>
<li class="toctree-l4"><a class="reference internal" href="test_results/node/tag_1_35_5.html#new-issues">New issues</a></li>
<li class="toctree-l4"><a class="reference internal" href="test_results/node/tag_1_35_5.html#breaking-changes">Breaking changes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="test_results/node/tag_1_35_4_rc1.html">1.35.4-rc1</a><ul>
<li class="toctree-l4"><a class="reference internal" href="test_results/node/tag_1_35_4_rc1.html#changelogs">Changelogs</a></li>
<li class="toctree-l4"><a class="reference internal" href="test_results/node/tag_1_35_4_rc1.html#regression-testing-on-a-local-cluster">Regression testing on a local cluster</a></li>
<li class="toctree-l4"><a class="reference internal" href="test_results/node/tag_1_35_4_rc1.html#release-testing-checklist">Release testing checklist</a></li>
<li class="toctree-l4"><a class="reference internal" href="test_results/node/tag_1_35_4_rc1.html#new-functionalities-in-this-tag">New functionalities in this tag</a></li>
<li class="toctree-l4"><a class="reference internal" href="test_results/node/tag_1_35_4_rc1.html#secp256k1-iog-test-tracking">SECP256k1 IOG Test Tracking</a></li>
<li class="toctree-l4"><a class="reference internal" href="test_results/node/tag_1_35_4_rc1.html#new-issues">New issues</a></li>
<li class="toctree-l4"><a class="reference internal" href="test_results/node/tag_1_35_4_rc1.html#breaking-changes">Breaking changes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="test_results/node/tag_1_35_3.html">1.35.3</a><ul>
<li class="toctree-l4"><a class="reference internal" href="test_results/node/tag_1_35_3.html#changelogs">Changelogs</a></li>
<li class="toctree-l4"><a class="reference internal" href="test_results/node/tag_1_35_3.html#regression-testing-on-a-local-cluster">Regression testing on a local cluster</a></li>
<li class="toctree-l4"><a class="reference internal" href="test_results/node/tag_1_35_3.html#release-testing-checklist">Release testing checklist</a></li>
<li class="toctree-l4"><a class="reference internal" href="test_results/node/tag_1_35_3.html#new-functionalities-in-this-tag">New functionalities in this tag</a></li>
<li class="toctree-l4"><a class="reference internal" href="test_results/node/tag_1_35_3.html#new-issues">New issues</a></li>
<li class="toctree-l4"><a class="reference internal" href="test_results/node/tag_1_35_3.html#breaking-changes">Breaking changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="test_results/node/tag_1_35_3.html#relevant-existing-issues">Relevant existing issues</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="process.html">Process</a><ul>
<li class="toctree-l2"><a class="reference internal" href="process/100_test_types.html">Types and levels of tests</a><ul>
<li class="toctree-l3"><a class="reference internal" href="process/100_test_types.html#node-system-tests">Node system tests</a><ul>
<li class="toctree-l4"><a class="reference internal" href="process/100_test_types.html#node-nightly-cli-tests">Node nightly CLI tests</a></li>
<li class="toctree-l4"><a class="reference internal" href="process/100_test_types.html#node-cli-tests-on-demand">Node CLI tests (on demand)</a></li>
<li class="toctree-l4"><a class="reference internal" href="process/100_test_types.html#node-sync-tests">Node sync tests</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="process/100_test_types.html#db-sync-system-tests">DB Sync system tests</a><ul>
<li class="toctree-l4"><a class="reference internal" href="process/100_test_types.html#db-sync-nightly-tests">DB Sync nightly tests</a></li>
<li class="toctree-l4"><a class="reference internal" href="process/100_test_types.html#db-sync-feature-tests-on-demand">DB Sync feature tests (on demand)</a></li>
<li class="toctree-l4"><a class="reference internal" href="process/100_test_types.html#db-sync-sync-tests">DB Sync sync tests</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="process/100_test_types.html#exploratory-testing">Exploratory testing</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="process/200_quality_control_strategy.html">Quality control strategy</a><ul>
<li class="toctree-l3"><a class="reference internal" href="process/200_quality_control_strategy.html#scope-and-objectives">Scope and objectives</a></li>
<li class="toctree-l3"><a class="reference internal" href="process/200_quality_control_strategy.html#key-principles">Key principles</a></li>
<li class="toctree-l3"><a class="reference internal" href="process/200_quality_control_strategy.html#quality-control-approach">Quality control approach</a></li>
<li class="toctree-l3"><a class="reference internal" href="process/200_quality_control_strategy.html#quality-control-methodology">Quality control methodology</a><ul>
<li class="toctree-l4"><a class="reference internal" href="process/200_quality_control_strategy.html#active-quality-control">Active quality control</a></li>
<li class="toctree-l4"><a class="reference internal" href="process/200_quality_control_strategy.html#passive-quality-control">Passive quality control</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="process/300_uat_strategy.html">User acceptance test strategy</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="how-tos.html">How Tos</a><ul>
<li class="toctree-l2"><a class="reference internal" href="how-tos/300_running_local_cluster.html">How to start a local cluster</a><ul>
<li class="toctree-l3"><a class="reference internal" href="how-tos/300_running_local_cluster.html#what-is-a-local-cluster">What is a local cluster</a><ul>
<li class="toctree-l4"><a class="reference internal" href="how-tos/300_running_local_cluster.html#local-cluster-parameters">Local cluster parameters</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="how-tos/300_running_local_cluster.html#requirements">Requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="how-tos/300_running_local_cluster.html#initial-setup-for-all-cardano-components">Initial setup for all Cardano components</a><ul>
<li class="toctree-l4"><a class="reference internal" href="how-tos/300_running_local_cluster.html#starting-postgres-test-database">Starting Postgres test database</a></li>
<li class="toctree-l4"><a class="reference internal" href="how-tos/300_running_local_cluster.html#preparing-local-cluster-scripts">Preparing local cluster scripts</a></li>
<li class="toctree-l4"><a class="reference internal" href="how-tos/300_running_local_cluster.html#adjusting-some-parameter-values">Adjusting some parameter values</a></li>
<li class="toctree-l4"><a class="reference internal" href="how-tos/300_running_local_cluster.html#start-the-local-cluster">Start the local cluster</a></li>
<li class="toctree-l4"><a class="reference internal" href="how-tos/300_running_local_cluster.html#stop-the-local-cluster">Stop the local cluster</a></li>
<li class="toctree-l4"><a class="reference internal" href="how-tos/300_running_local_cluster.html#set-the-tx-era">Set the TX_Era</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="how-tos/300_running_local_cluster.html#run-tests">Run tests</a><ul>
<li class="toctree-l4"><a class="reference internal" href="how-tos/300_running_local_cluster.html#run-test-suite-from-file">Run test suite from file</a></li>
<li class="toctree-l4"><a class="reference internal" href="how-tos/300_running_local_cluster.html#run-a-single-test">Run a single test</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="how-tos/300_running_local_cluster.html#interact-with-the-node">Interact with the node</a><ul>
<li class="toctree-l4"><a class="reference internal" href="how-tos/300_running_local_cluster.html#transfer-funds-to-your-address">Transfer funds to your address</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="how-tos/300_running_local_cluster.html#debugging-with-ipython">Debugging with IPython</a></li>
<li class="toctree-l3"><a class="reference internal" href="how-tos/300_running_local_cluster.html#logs-for-cardano-node-and-db-sync">Logs for <code class="docutils literal notranslate"><span class="pre">cardano-node</span></code> and <code class="docutils literal notranslate"><span class="pre">db-sync</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="how-tos/300_running_local_cluster.html#accessing-the-db-sync-database">Accessing the <code class="docutils literal notranslate"><span class="pre">db-sync</span></code> database</a><ul>
<li class="toctree-l4"><a class="reference internal" href="how-tos/300_running_local_cluster.html#useful-queries">Useful queries</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="how-tos/300_running_local_cluster.html#additional-resources">Additional resources</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="how-tos/350_mir_cert_test_example_manual_steps.html">Testing MIR certificate submission with a local cluster</a><ul>
<li class="toctree-l3"><a class="reference internal" href="how-tos/350_mir_cert_test_example_manual_steps.html#creating-key-pairs">Creating key pairs</a><ul>
<li class="toctree-l4"><a class="reference internal" href="how-tos/350_mir_cert_test_example_manual_steps.html#payment-key-pair">Payment key pair</a></li>
<li class="toctree-l4"><a class="reference internal" href="how-tos/350_mir_cert_test_example_manual_steps.html#stake-key-pair">Stake key pair</a></li>
<li class="toctree-l4"><a class="reference internal" href="how-tos/350_mir_cert_test_example_manual_steps.html#payment-address">Payment address</a></li>
<li class="toctree-l4"><a class="reference internal" href="how-tos/350_mir_cert_test_example_manual_steps.html#stake-address">Stake address</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="how-tos/350_mir_cert_test_example_manual_steps.html#transferring-funds-from-the-faucet-address-to-our-own-shelley-address-payment-addr">Transferring funds from the ‘faucet’ address to our own Shelley address <code class="docutils literal notranslate"><span class="pre">payment.addr</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="how-tos/350_mir_cert_test_example_manual_steps.html#build-tx">Build tx</a></li>
<li class="toctree-l4"><a class="reference internal" href="how-tos/350_mir_cert_test_example_manual_steps.html#sign-tx">Sign tx</a></li>
<li class="toctree-l4"><a class="reference internal" href="how-tos/350_mir_cert_test_example_manual_steps.html#submit-tx">Submit tx</a></li>
<li class="toctree-l4"><a class="reference internal" href="how-tos/350_mir_cert_test_example_manual_steps.html#check-funds-on-the-payment-addr">Check funds on the payment.addr</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="how-tos/350_mir_cert_test_example_manual_steps.html#creating-a-stake-registration-certificate">Creating a stake registration certificate</a><ul>
<li class="toctree-l4"><a class="reference internal" href="how-tos/350_mir_cert_test_example_manual_steps.html#submitting-the-certificate-with-a-transaction">Submitting the certificate with a transaction</a></li>
<li class="toctree-l4"><a class="reference internal" href="how-tos/350_mir_cert_test_example_manual_steps.html#our-stake-address-has-id-13-and-is-registered">Our stake address has id=13 and is registered</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="how-tos/350_mir_cert_test_example_manual_steps.html#deregistering-an-empty-stake-address">Deregistering an ‘empty’ stake address</a><ul>
<li class="toctree-l4"><a class="reference internal" href="how-tos/350_mir_cert_test_example_manual_steps.html#creating-a-deregistration-certificate">Creating a deregistration certificate</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="how-tos/350_mir_cert_test_example_manual_steps.html#generating-mir-cert-to-send-funds-from-reserves-to-unregistered-stake-address">Generating MIR cert to send funds from reserves to unregistered stake address</a><ul>
<li class="toctree-l4"><a class="reference internal" href="how-tos/350_mir_cert_test_example_manual_steps.html#id4">Build tx</a></li>
<li class="toctree-l4"><a class="reference internal" href="how-tos/350_mir_cert_test_example_manual_steps.html#id5">Sign tx</a></li>
<li class="toctree-l4"><a class="reference internal" href="how-tos/350_mir_cert_test_example_manual_steps.html#id6">Submit tx</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="how-tos/350_mir_cert_test_example_manual_steps.html#state-of-tables-after-mir-cert-tx-submission">State of tables after MIR cert tx submission</a></li>
<li class="toctree-l3"><a class="reference internal" href="how-tos/350_mir_cert_test_example_manual_steps.html#logs">Logs</a><ul>
<li class="toctree-l4"><a class="reference internal" href="how-tos/350_mir_cert_test_example_manual_steps.html#stdout-log">stdout.log</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="how-tos/380_stake_credential_history_tool.html">Stake credential history tool</a><ul>
<li class="toctree-l3"><a class="reference internal" href="how-tos/380_stake_credential_history_tool.html#documentation">Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="how-tos/380_stake_credential_history_tool.html#example-of-usage">Example of usage</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="how-tos/500_smash_faq.html">SMASH FAQ</a></li>
<li class="toctree-l2"><a class="reference internal" href="how-tos/520_smash_tests_and_debugging_examples.html">SMASH - tests and debugging examples</a><ul>
<li class="toctree-l3"><a class="reference internal" href="how-tos/520_smash_tests_and_debugging_examples.html#checking-smash-status">Checking SMASH status</a></li>
<li class="toctree-l3"><a class="reference internal" href="how-tos/520_smash_tests_and_debugging_examples.html#fetching-of-the-metadata">Fetching of the metadata</a></li>
<li class="toctree-l3"><a class="reference internal" href="how-tos/520_smash_tests_and_debugging_examples.html#delisting-pools">Delisting pools</a></li>
<li class="toctree-l3"><a class="reference internal" href="how-tos/520_smash_tests_and_debugging_examples.html#reserving-a-ticker">Reserving a ticker</a></li>
<li class="toctree-l3"><a class="reference internal" href="how-tos/520_smash_tests_and_debugging_examples.html#whitelisting">Whitelisting</a></li>
<li class="toctree-l3"><a class="reference internal" href="how-tos/520_smash_tests_and_debugging_examples.html#checking-pool-rejection-errors">Checking pool rejection errors</a></li>
<li class="toctree-l3"><a class="reference internal" href="how-tos/520_smash_tests_and_debugging_examples.html#pool-unregistrations">Pool unregistrations</a></li>
<li class="toctree-l3"><a class="reference internal" href="how-tos/520_smash_tests_and_debugging_examples.html#fetch-policies-from-another-smash-service">Fetch policies from another SMASH service</a></li>
<li class="toctree-l3"><a class="reference internal" href="how-tos/520_smash_tests_and_debugging_examples.html#an-example-of-debugging-an-issue-with-a-pool">An example of debugging an issue with a pool</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="contribute/contributing.html">Contributing to the Cardano node tests repository</a><ul>
<li class="toctree-l2"><a class="reference internal" href="contribute/contributing.html#how-can-i-contribute">How can I contribute?</a><ul>
<li class="toctree-l3"><a class="reference internal" href="contribute/contributing.html#reporting-an-issue">Reporting an issue</a><ul>
<li class="toctree-l4"><a class="reference internal" href="contribute/contributing.html#how-do-i-submit-a-good-issue-report">How do I submit a (good) issue report?</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="contribute/contributing.html#your-first-code-contribution">Your first code contribution</a><ul>
<li class="toctree-l4"><a class="reference internal" href="contribute/contributing.html#pull-requests">Pull requests</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="contribute/contributing.html#id1">Style guides</a><ul>
<li class="toctree-l3"><a class="reference internal" href="contribute/contributing.html#git-commit-messages">Git commit messages</a></li>
<li class="toctree-l3"><a class="reference internal" href="contribute/contributing.html#python-style-guide">Python style guide</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="contribute/contributing.html#roles-and-responsibilities">Roles and Responsibilities</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="modules.html">Source Documentation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="cardano_node_tests.html">cardano_node_tests package</a><ul>
<li class="toctree-l3"><a class="reference internal" href="cardano_node_tests.html#subpackages">Subpackages</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cardano_node_tests.cluster_management.html">cardano_node_tests.cluster_management package</a></li>
<li class="toctree-l4"><a class="reference internal" href="cardano_node_tests.pytest_plugins.html">cardano_node_tests.pytest_plugins package</a></li>
<li class="toctree-l4"><a class="reference internal" href="cardano_node_tests.tests.html">cardano_node_tests.tests package</a></li>
<li class="toctree-l4"><a class="reference internal" href="cardano_node_tests.utils.html">cardano_node_tests.utils package</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cardano_node_tests.html#submodules">Submodules</a></li>
<li class="toctree-l3"><a class="reference internal" href="cardano_node_tests.html#module-cardano_node_tests.cardano_cli_coverage">cardano_node_tests.cardano_cli_coverage module</a></li>
<li class="toctree-l3"><a class="reference internal" href="cardano_node_tests.html#module-cardano_node_tests.prepare_cluster_scripts">cardano_node_tests.prepare_cluster_scripts module</a></li>
<li class="toctree-l3"><a class="reference internal" href="cardano_node_tests.html#module-cardano_node_tests.split_topology">cardano_node_tests.split_topology module</a></li>
<li class="toctree-l3"><a class="reference internal" href="cardano_node_tests.html#module-cardano_node_tests.testnet_cleanup">cardano_node_tests.testnet_cleanup module</a></li>
<li class="toctree-l3"><a class="reference internal" href="cardano_node_tests.html#module-cardano_node_tests">Module contents</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">cardano-node-tests</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">README for cardano-node-tests</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/input-output-hk/cardano-node-tests/blob/master/src_docs/source/readme.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="readme-for-cardano-node-tests">
<h1>README for cardano-node-tests<a class="headerlink" href="#readme-for-cardano-node-tests" title="Permalink to this headline"></a></h1>
<a class="reference external image-reference" href="https://github.com/ambv/black"><img alt="Code style: black" src="https://img.shields.io/badge/code%20style-black-000000.svg" /></a>
<p>System and end-to-end (E2E) tests for cardano-node.</p>
<p>Check this <a class="reference external" href="https://input-output-hk.github.io/cardano-node-tests">documentation</a> for more details.</p>
<section id="running-tests-using-github-actions">
<h2>Running tests using Github Actions<a class="headerlink" href="#running-tests-using-github-actions" title="Permalink to this headline"></a></h2>
<p>The easiest way to run the tests is by using Github Actions.</p>
<ul class="simple">
<li><p>fork this repository</p></li>
<li><p>enable Github Actions in your fork (“Settings” / “Actions” / “General” / “Actions permissions”, check “Allow all actions and reusable workflows”)</p></li>
<li><p>go to “Actions”, select “01 Regression tests” (or “02 Regression tests with db-sync”)</p></li>
<li><p>select “Run workflow”</p></li>
</ul>
<a class="reference external image-reference" href="https://user-images.githubusercontent.com/2352619/209117914-ef3afb38-2b8b-4a4f-a03f-c9b52bccc5ba.png"><img alt="Run workflow" src="https://user-images.githubusercontent.com/2352619/209117914-ef3afb38-2b8b-4a4f-a03f-c9b52bccc5ba.png" /></a>
</section>
<section id="running-tests-using-nix">
<h2>Running tests using Nix<a class="headerlink" href="#running-tests-using-nix" title="Permalink to this headline"></a></h2>
<ul class="simple">
<li><p>install and configure nix, follow <a class="reference external" href="https://github.com/input-output-hk/cardano-node/blob/master/doc/getting-started/building-the-node-using-nix.md">cardano-node documentation</a></p></li>
<li><p>clone this repo</p></li>
<li><p>run <code class="docutils literal notranslate"><span class="pre">./.github/regression.sh</span></code></p></li>
</ul>
<hr class="docutils" />
<p><strong>NOTE</strong> <span class="raw-html-m2r"><!-- markdownlint-disable-line MD036 --></span></p>
<p>It takes ~ 30 mins for local cluster instance to get from Byron to Babbage. If it seems that tests are stuck, they are likely just waiting for local cluster instances to be fully started.</p>
<hr class="docutils" />
<p>To start local cluster directly in Babbage, set <code class="docutils literal notranslate"><span class="pre">CI_FAST_CLUSTER=1</span></code>.</p>
<p>The execution can be configured using env variables described in the section below.</p>
<p>In addition, you can use</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">NODE_REV</span></code> - revison of <code class="docutils literal notranslate"><span class="pre">cardano-node</span></code> (default: master HEAD)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CI_FAST_CLUSTER</span></code> - start local cluster directly in Babbage era, without going from Byron -&gt; … -&gt; Babbage (same effect as <code class="docutils literal notranslate"><span class="pre">SCRIPTS_DIRNAME=babbage_fast</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CI_ENABLE_DBSYNC</span></code> - specifies if tests will setup db-sync and perform db-sync checks (default: unset)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DBSYNC_REV</span></code> - revison of <code class="docutils literal notranslate"><span class="pre">cardano-db-sync</span></code> (default: master HEAD)</p></li>
</ul>
</section>
<section id="variables-for-configuring-testrun">
<h2>Variables for configuring testrun<a class="headerlink" href="#variables-for-configuring-testrun" title="Permalink to this headline"></a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">SCHEDULING_LOG</span></code> – specifies the path to the file where log messages for tests and cluster instance scheduler are stored</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">PYTEST_ARGS</span></code> – specifies additional arguments for pytest (default: unset)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">MARKEXPR</span></code> – specifies marker expression for pytest (default: unset)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">TEST_THREADS</span></code> – specifies the number of pytest workers (default: 20)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CLUSTERS_COUNT</span></code> – number of cluster instances that will be started (default: 9)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CLUSTER_ERA</span></code> – cluster era for Cardano node – used for selecting the correct cluster start script (default: babbage)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">TX_ERA</span></code> – era for transactions – can be used for creating Shelley-era (Allegra-era, …) transactions (default: unset)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">NUM_POOLS</span></code> – number of stake pools created in each cluster instance (default: 3)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ENABLE_P2P</span></code> – use P2P networking instead of the default legacy networking (default: unset)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">MIXED_P2P</span></code> – use mix of P2P and legacy networking; half of stake pools using legacy and the other half P2P (default: unset)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DB_BACKEND</span></code> – ‘mem’ or ‘lmdb’, default is ‘mem’ (or legacy) backend if unset (default: unset)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SCRIPTS_DIRNAME</span></code> – path to a dir with local cluster start/stop scripts and configuration files (default: unset)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">BOOTSTRAP_DIR</span></code> – path to a bootstrap dir for the given testnet (genesis files, config files, faucet data) (default: unset)</p></li>
</ul>
<p>For example:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="nv">SCHEDULING_LOG</span><span class="o">=</span>testrun_20221224_1.log<span class="w"> </span><span class="nv">NUM_POOLS</span><span class="o">=</span><span class="m">6</span><span class="w"> </span><span class="nv">MIXED_P2P</span><span class="o">=</span><span class="m">1</span><span class="w"> </span>./.github/regression.sh
</pre></div>
</div>
<p>or</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="nv">SCHEDULING_LOG</span><span class="o">=</span>testrun_20221224_1.log<span class="w"> </span><span class="nv">TEST_THREADS</span><span class="o">=</span><span class="m">15</span><span class="w"> </span><span class="nv">CLUSTER_ERA</span><span class="o">=</span>babbage<span class="w"> </span><span class="nv">TX_ERA</span><span class="o">=</span>alonzo<span class="w"> </span><span class="nv">SCRIPTS_DIRNAME</span><span class="o">=</span>babbage_fast<span class="w"> </span><span class="nv">PYTEST_ARGS</span><span class="o">=</span><span class="s2">&quot;-k &#39;test_stake_pool_low_cost or test_reward_amount&#39;&quot;</span><span class="w"> </span><span class="nv">MARKEXPR</span><span class="o">=</span><span class="s2">&quot;not long&quot;</span><span class="w"> </span>make<span class="w"> </span>tests
</pre></div>
</div>
<p>or</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="nv">SCHEDULING_LOG</span><span class="o">=</span>testrun_20221224_1.log<span class="w"> </span><span class="nv">CLUSTER_ERA</span><span class="o">=</span>babbage<span class="w"> </span><span class="nv">BOOTSTRAP_DIR</span><span class="o">=</span>~/tmp/shelley_qa_config/<span class="w"> </span>make<span class="w"> </span>testnets
</pre></div>
</div>
</section>
<section id="local-installation-e-g-for-tests-development">
<h2>Local installation (e.g. for tests development)<a class="headerlink" href="#local-installation-e-g-for-tests-development" title="Permalink to this headline"></a></h2>
<p>Install and configure nix, follow <a class="reference external" href="https://github.com/input-output-hk/cardano-node/blob/master/doc/getting-started/building-the-node-using-nix.md">cardano-node documentation</a>.
Install and configure poetry, follow <a class="reference external" href="https://python-poetry.org/docs/#installation">Poetry documentation</a>.</p>
<p>Create a Python virtual environment (requires Python v3.8 or newer) and install this package together with development requirements:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>./setup_venv.sh
</pre></div>
</div>
</section>
<section id="local-usage">
<h2>Local usage<a class="headerlink" href="#local-usage" title="Permalink to this headline"></a></h2>
<p>Preparing the environment:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="c1"># cd to cardano-node repo</span>
<span class="nb">cd</span><span class="w"> </span>&lt;your<span class="w"> </span>path<span class="w"> </span>to<span class="w"> </span>cardano-node<span class="w"> </span>repo&gt;
<span class="c1"># update and checkout the desired commit/tag</span>
git<span class="w"> </span>checkout<span class="w"> </span>master
git<span class="w"> </span>pull<span class="w"> </span>origin<span class="w"> </span>master
git<span class="w"> </span>fetch<span class="w"> </span>--all<span class="w"> </span>--tags
git<span class="w"> </span>checkout<span class="w"> </span>tags/&lt;tag&gt;
<span class="c1"># launch devops shell</span>
nix<span class="w"> </span>develop<span class="w"> </span>.#devops

<span class="c1"># cd to tests repo</span>
<span class="nb">cd</span><span class="w"> </span>&lt;your<span class="w"> </span>path<span class="w"> </span>to<span class="w"> </span>cardano-node-test<span class="w"> </span>repo&gt;
<span class="c1"># activate virtual env</span>
poetry<span class="w"> </span>shell
<span class="c1"># add virtual env to PYTHONPATH</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">PYTHONPATH</span><span class="o">=</span><span class="s2">&quot;</span><span class="k">$(</span><span class="nb">echo</span><span class="w"> </span><span class="nv">$VIRTUAL_ENV</span>/lib/python3*/site-packages<span class="k">)</span><span class="s2">&quot;</span>:<span class="nv">$PYTHONPATH</span>
<span class="c1"># set env variables</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">CARDANO_NODE_SOCKET_PATH</span><span class="o">=</span>&lt;your<span class="w"> </span>path<span class="w"> </span>to<span class="w"> </span>cardano-node<span class="w"> </span>repo&gt;/state-cluster0/bft1.socket
</pre></div>
</div>
<p>Check that the environment is correctly set up by running:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ ./check_env.sh
&#39;cardano-node&#39; available: ✔
&#39;cardano-cli&#39; available: ✔
&#39;python&#39; available: ✔
&#39;pytest&#39; available: ✔
&#39;nix-shell&#39; available: ✔
&#39;jq&#39; available: ✔
&#39;supervisord&#39; available: ✔
&#39;supervisorctl&#39; available: ✔
&#39;bech32&#39; available: ✔
inside nix shell: ✔
in repo root: ✔
DEV cluster: ✔
python works: ✔
in python venv: ✔
venv in PYTHONPATH: ✔
cardano-node-tests installed: ✔
pytest works: ✔
same version of node and cli: ✔
socket path set: ✔
socket path correct: ✔
socket path exists: ✔
cluster era: babbage
transaction era: babbage
using dbsync (optional): ✔
dbsync available: ✔
P2P network (optional): -
</pre></div>
</div>
<p>Running tests on a local cluster (local cluster instances will be started automatically during test run setup):</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>make<span class="w"> </span>tests
</pre></div>
</div>
<p>Running tests on one of the testnets:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="c1"># set env variables</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">CARDANO_NODE_SOCKET_PATH</span><span class="o">=</span>&lt;your<span class="w"> </span>path<span class="w"> </span>to<span class="w"> </span>cardano-node<span class="w"> </span>repo&gt;/state-cluster0/relay1.socket
<span class="c1"># run tests</span>
<span class="nv">BOOTSTRAP_DIR</span><span class="o">=</span>&lt;your<span class="w"> </span>path<span class="w"> </span>to<span class="w"> </span>bootstrap<span class="w"> </span>dir&gt;<span class="w"> </span>make<span class="w"> </span>testnets
</pre></div>
</div>
<p>Running individual tests:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>pytest<span class="w"> </span>-k<span class="w"> </span><span class="s2">&quot;test_name1 or test_name2&quot;</span><span class="w"> </span>cardano_node_tests
</pre></div>
</div>
<p>Running linter:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="c1"># activate virtual env</span>
poetry<span class="w"> </span>shell
<span class="c1"># run linter</span>
make<span class="w"> </span>lint
</pre></div>
</div>
</section>
<section id="tests-development">
<h2>Tests development<a class="headerlink" href="#tests-development" title="Permalink to this headline"></a></h2>
<p>When running tests, the testing framework starts and stops cluster instances as needed. That is not ideal for test development, as starting a cluster instance takes several epochs (to get from Byron to Babbage). To keep the Cardano cluster running in between test runs, one needs to start it in ‘development mode’:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="c1"># activate virtual env</span>
poetry<span class="w"> </span>shell
<span class="c1"># prepare cluster scripts</span>
prepare-cluster-scripts<span class="w"> </span>-d<span class="w"> </span>&lt;destination<span class="w"> </span>dir&gt;/babbage<span class="w"> </span>-s<span class="w"> </span>cardano_node_tests/cluster_scripts/babbage/
<span class="c1"># set env variables</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">CARDANO_NODE_SOCKET_PATH</span><span class="o">=</span>&lt;your<span class="w"> </span>path<span class="w"> </span>to<span class="w"> </span>cardano-node<span class="w"> </span>repo&gt;/state-cluster0/bft1.socket<span class="w"> </span><span class="nv">DEV_CLUSTER_RUNNING</span><span class="o">=</span><span class="m">1</span>
<span class="c1"># start the cluster instance in development mode</span>
&lt;destination<span class="w"> </span>dir&gt;/babbage/start-cluster-hfc
</pre></div>
</div>
<p>After the cluster starts, keys and configuration files are available in the <code class="docutils literal notranslate"><span class="pre">&lt;your</span> <span class="pre">path</span> <span class="pre">to</span> <span class="pre">cardano-node</span> <span class="pre">repo&gt;/state-cluster0</span></code> directory. The pool-related files and keys are located in the <code class="docutils literal notranslate"><span class="pre">nodes</span></code> subdirectory, genesis keys in the <code class="docutils literal notranslate"><span class="pre">shelley</span></code> and <code class="docutils literal notranslate"><span class="pre">byron</span></code> subdirectories, and payment address with initial funds and related keys in the <code class="docutils literal notranslate"><span class="pre">byron</span></code> subdirectory. The local faucet address and related key files are stored in the <code class="docutils literal notranslate"><span class="pre">addrs_data</span></code> subdirectory.</p>
<p>To restart the cluster (eg, after upgrading <code class="docutils literal notranslate"><span class="pre">cardano-node</span></code> and <code class="docutils literal notranslate"><span class="pre">cardano-cli</span></code> binaries), run:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>./scripts/restart_dev_cluster.sh
</pre></div>
</div>
</section>
<section id="test-coverage-of-cardano-cli-commands">
<h2>Test coverage of Cardano CLI commands<a class="headerlink" href="#test-coverage-of-cardano-cli-commands" title="Permalink to this headline"></a></h2>
<p>To get test coverage of Cardano CLI commands, run tests as usual (<code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">tests</span></code>) and generate the coverage report JSON file with:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>cardano-cli-coverage<span class="w"> </span>-i<span class="w"> </span>.cli_coverage/cli_coverage_*.json<span class="w"> </span>-o<span class="w"> </span>.cli_coverage/coverage_report.json
</pre></div>
</div>
</section>
<section id="building-documentation">
<h2>Building documentation<a class="headerlink" href="#building-documentation" title="Permalink to this headline"></a></h2>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="c1"># activate virtual env</span>
poetry<span class="w"> </span>shell
<span class="c1"># build and deploy documentation</span>
./deploy_doc.sh
</pre></div>
</div>
</section>
<section id="contributing">
<h2>Contributing<a class="headerlink" href="#contributing" title="Permalink to this headline"></a></h2>
<p>Install this package and its dependencies as described above.</p>
<p>Run <code class="docutils literal notranslate"><span class="pre">pre-commit</span> <span class="pre">install</span></code> to set up the Git hook scripts that will check your changes before every commit. Alternatively, run <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">lint</span></code> manually before pushing your changes.</p>
<p>Follow the <a class="reference external" href="https://google.github.io/styleguide/pyguide.html">Google Python Style Guide</a>, with the exception that formatting is handled automatically by <a class="reference external" href="https://github.com/psf/black">Black</a> (through the <code class="docutils literal notranslate"><span class="pre">pre-commit</span></code> command).</p>
<p>See the <a class="reference external" href="https://github.com/input-output-hk/cardano-node-tests/blob/master/CONTRIBUTING.md">CONTRIBUTING</a> document for more details.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="Welcome to Cardano node tests documentation!" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="test_results.html" class="btn btn-neutral float-right" title="Test Results" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright .</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>